(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9474)}])},5182:function(e,n,t){"use strict";t.d(n,{z3:function(){return r},bX:function(){return p},Qd:function(){return j}});var r,s,a=t(5666),i=t.n(a),o=t(5893),c=t(7294),l=t(3374),u=t(2963),d=t(1645);function h(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){h(a,r,s,i,o,"next",e)}function o(e){h(a,r,s,i,o,"throw",e)}i(void 0)}))}}function f(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(s=r||(r={})).FetchingAllDepartments="fetching all departments",s.AddingDepartment="adding department",s.UpdatingDepartment="updating department",s.DeletingDepartment="deleting department",s.UPDATING_DEPARTMENT="updating department",s.AddingStream="adding stream",s.UpdatingStream="updating stream",s.DeletingStream="deleting stream";var g="/departments",x=(0,c.createContext)({departments:null,department:null,loading:null,error:null,setError:function(e){},AddDepartment:function(e,n,t){},GetDepartments:function(){},GetDepartment:function(e){},UpdateDepartment:function(e,n,t){},DeleteDepartment:function(e,n,t){},AddStream:function(e,n,t){},UpdateStream:function(e,n,t){},DeleteStream:function(e,n,t){}}),p=function(e){var n=e.children,t=(0,c.useState)(),s=t[0],a=t[1],h=(0,c.useState)(),p=h[0],j=(h[1],(0,c.useState)()),v=j[0],S=j[1],N=(0,c.useState)(),y=N[0],D=N[1];(0,c.useEffect)((function(){E()}),[]);var _=(0,c.useCallback)(m(i().mark((function e(n,t,s){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),S(r.AddingDepartment),e.next=5,d.o.post(g,(0,l.m)(n));case 5:o=e.sent,a((function(e){return f(e).concat([(0,l.H)(o.data)])})),S(null),t(),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),D("Failed to add department"),S(null),s();case 17:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),E=(0,c.useCallback)(m(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),S(r.FetchingAllDepartments),e.next=5,d.o.get(g);case 5:n=e.sent,a(n.data.map((function(e){return(0,l.H)(e)}))),S(null),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),D("Failed to fetch departments"),S(null);case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),A=(0,c.useCallback)((function(){}),[]),b=(0,c.useCallback)(m(i().mark((function e(n,t,s){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),S(r.UPDATING_DEPARTMENT),n.Head.Address.HouseNo="",console.log((0,l.m)(n)),e.next=7,d.o.patch(g,(0,l.m)(n));case 7:o=e.sent,console.log(o),console.log((0,l.H)(o.data)),a((function(e){return f(e.map((function(e){return e.ID==n.ID?(0,l.H)(o.data):e})))})),S(null),t(),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),D("Failed to update department"),S(null),s();case 21:case"end":return e.stop()}}),e,null,[[0,15]])}))),[]),C=(0,c.useCallback)(m(i().mark((function e(n,t,s){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),S(r.DeletingDepartment),e.next=5,d.o.delete(g+"?id=".concat(n));case 5:a((function(e){return f(e.filter((function(e){return e.ID!=n})))})),S(null),t&&t(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response?D(e.t0.response.data):D("Failed to delete department"),S(null),s&&s();case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),w=(0,c.useCallback)(m(i().mark((function e(n,t,s){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),S(r.AddingStream),e.next=5,d.o.post("/streams",(0,u.L)(n));case 5:return e.sent,e.next=8,E();case 8:t&&t(),S(null),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?D(e.t0.response.data):D("Failed to add stream"),S(null),s&&s();case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),I=(0,c.useCallback)(m(i().mark((function e(n,t,s){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),S(r.UpdatingStream),e.next=5,d.o.patch("streams",(0,u.L)(n));case 5:return e.sent,e.next=8,E();case 8:S(null),t(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),D("Error updating stream"),S(null),s();case 18:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),T=(0,c.useCallback)(m(i().mark((function e(n,t,s){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),S(r.DeletingStream),e.next=5,d.o.delete("streams"+"?id=".concat(n));case 5:return e.next=7,E();case 7:S(null),t&&t(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?D(e.t0.response.data):D("Failed to delete stream"),S(null),s&&s();case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),k=(0,c.useMemo)((function(){return{departments:s,department:p,loading:v,error:y,setError:D,AddDepartment:_,GetDepartments:E,GetDepartment:A,UpdateDepartment:b,DeleteDepartment:C,AddStream:w,UpdateStream:I,DeleteStream:T}}),[s,p,v,y]);return(0,o.jsx)(x.Provider,{value:k,children:n})},j=function(){return(0,c.useContext)(x)}},3359:function(e,n,t){"use strict";t.d(n,{J:function(){return a}});var r=t(5893),s=t(7294),a=function(e){var n=e.label,t=e.onChange,a=e.value,i=e.disabled,o=void 0!==i&&i,c=(0,s.useState)(!1),l=c[0],u=c[1];return(0,r.jsxs)("div",{onClick:function(){o||u((function(e){return t(!e),!e}))},className:null!=a?a?"check-box ".concat(o&&"check-box--disabled"," check-box--checked"):"check-box ".concat(o&&"check-box--disabled"):l?"check-box ".concat(o&&"check-box--disabled"," check-box--checked"):"check-box ".concat(o&&"check-box--disabled"),children:[(0,r.jsx)("div",{className:"check-box__box"}),n&&(0,r.jsx)("div",{className:"check-box__label",children:n})]})}},2566:function(e,n,t){"use strict";t.d(n,{v:function(){return i}});var r=t(5893);t(7294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}var i=function(e){var n=e.options,t=void 0===n?[]:n,s=e.label,i=e.placeholder,o=void 0===i?"":i,c=e.refs,l=void 0===c?{}:c,u=e.error,d=e.onChange,h=void 0===d?function(e){}:d,m=e.defaultValue,f=e.styles,g=void 0===f?{}:f,x=e.multiple,p=void 0!==x&&x,j=e.size,v=void 0===j?0:j;return(0,r.jsxs)("div",{style:a({},g),className:"drop-down",children:[(0,r.jsx)("div",{className:"drop-down__label ".concat(!!u&&"drop-down__label--error"),children:s}),(0,r.jsxs)("select",a({style:{height:0==v?"4rem":"auto"},defaultValue:m&&m,multiple:p,size:v,onChange:function(e){console.log("olla",e.target.value),h(e.target.value)}},l,{className:"drop-down__select ".concat(!!u&&"drop-down__select--error"),children:[(0,r.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:o||"Select"}),t.map((function(e){return(0,r.jsxs)("option",{value:e.value,children:[" ",e.name," "]})}))]})),u&&(0,r.jsx)("div",{className:"drop-down__error-label",children:u.message})]})}},9474:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return jt}});var r=t(5893),s=t(7294),a=t(1163),i=t(8797),o=t(5666),c=t.n(o),l=t(7125),u=function(e){return{ID:e.announcementId,Title:e.title,Message:e.message,CreatedAt:e.createdAt?new Date(e.createdAt):null,PostedBy:e.postedBy?(0,i.c7)(e.postedBy):null,Section:e.section?(0,l.h)(e.section):null}},d=function(e){var n;return{announcementId:null!==(n=e.ID)&&void 0!==n?n:"",title:e.Title,message:e.Message,postedBy:e.PostedBy?(0,i.oE)(e.PostedBy):{},section:e.Section?(0,l.S)(e.Section):{},createdAt:e.CreatedAt}},h=t(1645),m="ws://18.134.74.142:5003/";function f(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function g(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){f(a,r,s,i,o,"next",e)}function o(e){f(a,r,s,i,o,"throw",e)}i(void 0)}))}}function x(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p,j,v,S="/announcements";(v=j||(j={})).FetchingAnnouncements="fetching announcements",v.AddingAnnouncement="adding announcement",v.UpdatingAnnouncement="updating announcement",v.DeletingAnnouncements="deleting announcements",v.ConnectingToAnnouncementSocket="connecting to announcement socket";var N=(0,s.createContext)({announcements:null,connectedToAnnouncementSocket:!1,loading:null,error:null,setError:function(e){},GetAnnouncements:function(){},AddAnnouncement:function(e,n,t){},UpdateAnnouncement:function(e,n,t){},DeleteAnnouncement:function(e,n,t){},ConnectToAnnouncementSocket:function(){},DisconnectToAnnouncementSocket:function(){}}),y=function(e){var n=e.children,t=(0,s.useState)(),a=t[0],i=t[1],o=(0,s.useState)(),l=o[0],f=o[1],v=(0,s.useState)(),y=v[0],D=v[1],_=(0,s.useState)(!1),E=_[0],A=_[1];(0,s.useEffect)((function(){b(),p=new WebSocket("".concat(m,"/announcements/socket?token=").concat(localStorage.getItem("authToken"))),T()}),[]);var b=(0,s.useCallback)(g(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),f(j.FetchingAnnouncements),e.next=5,h.o.get(S);case 5:n=e.sent,i(n.data.map((function(e){return u(e)})).reverse()),f(null),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response?D(e.t0.response.data):D("Failed to fetch announcements"),f(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),C=(0,s.useCallback)(g(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),f(j.AddingAnnouncement),e.next=5,h.o.post(S,d(n));case 5:s=e.sent,i((function(e){return[u(s.data)].concat(x(e))})),p.send(JSON.stringify({event:"ADD",data:s.data})),f(null),t&&t(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?D(e.t0.response.data):D("Failed to add announcement"),f(null),r&&r();case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),w=(0,s.useCallback)(g(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(null),f(j.UpdatingAnnouncement),e.next=5,h.o.patch(S,d(n));case 5:s=e.sent,i((function(e){return[u(s.data)].concat(x(e.filter((function(e){return e.ID!=n.ID}))))})),p.send(JSON.stringify({event:"UPDATE",data:d(n)})),f(null),t&&t(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?D(e.t0.response.data):D("Failed to add announcement"),f(null),r&&r();case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),I=(0,s.useCallback)(g(c().mark((function e(n,t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(null),f(j.DeletingAnnouncements),e.next=4,h.o.delete(S+"?id=".concat(n));case 4:i((function(e){return x(e.filter((function(e){return e.ID!=n})))})),p.send(JSON.stringify({event:"DELETE",data:n})),f(null),t&&t();case 9:case"end":return e.stop()}}),e)}))),[]),T=(0,s.useCallback)(g(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{p.onopen=function(e){A(!0),console.log("e open"),console.log(e)},p.onerror=function(e){A(!1)},p.onclose=function(e){console.log("e close"),console.log(e),A(!1)},p.onmessage=function(e){console.log("e message"),console.log(e);var n=JSON.parse(e.data);if("ADD"==n.event&&i((function(e){return[u(n.data)].concat(x(e))})),"UPDATE"==n.event){var t=u(n.data);i((function(e){return[t].concat(x(e.filter((function(e){return e.ID!=t.ID}))))}))}if("DELETE"==n.event){var r=n.data;i((function(e){return x(e.filter((function(e){return e.ID!=r})))}))}}}catch(n){}case 1:case"end":return e.stop()}}),e)}))),[]),k=(0,s.useCallback)(g(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{p.close(),A(!1)}catch(n){}case 1:case"end":return e.stop()}}),e)}))),[]),U=(0,s.useMemo)((function(){return{announcements:a,connectedToAnnouncementSocket:E,loading:l,error:y,setError:D,GetAnnouncements:b,AddAnnouncement:C,UpdateAnnouncement:w,DeleteAnnouncement:I,ConnectToAnnouncementSocket:T,DisconnectToAnnouncementSocket:k}}),[a,E,l,y]);return(0,r.jsx)(N.Provider,{value:U,children:n})},D=function(){return(0,s.useContext)(N)},_=t(8334),E=t(6860);function A(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function b(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){A(a,r,s,i,o,"next",e)}function o(e){A(a,r,s,i,o,"throw",e)}i(void 0)}))}}function C(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var w,I,T,k,U="/classes";(I=w||(w={})).ErrAddingClass="failed to add class",I.ErrFetchingClasses="failed to fetch classes",I.ErrUpdatingClass="failed to update class",I.ErrUpdatingClassCourses="failed to update class courses",(k=T||(T={})).AddingClass="adding class",k.FetchingClasses="fetching classes",k.UpdatingClasses="updating classes",k.ManagingCourses="managing courses",k.DeletingCourse="deleting course";var M=(0,s.createContext)({classes:null,loading:null,error:null,setError:function(e){},AddClass:function(e,n,t){},GetClasses:function(){},UpdateClass:function(e,n,t){},DeleteClass:function(e,n,t){},ManageCourse:function(e,n,t,r){}}),R=function(e){var n=e.children,t=(0,s.useState)(),a=t[0],i=t[1],o=(0,s.useState)(),l=o[0],u=o[1],d=(0,s.useState)(),m=d[0],f=d[1];(0,s.useEffect)((function(){x()}),[]);var g=(0,s.useCallback)(b(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(T.AddingClass),console.log(n),e.next=6,h.o.post(U,(0,E.u)(n));case 6:s=e.sent,i((function(e){return C(e).concat([(0,E.Q)(s.data)])})),u(null),t(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0.response?f(e.t0.response.data):f(w.ErrAddingClass),console.log(e.t0),r(),u(null);case 18:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),x=(0,s.useCallback)(b(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(T.FetchingClasses),e.next=5,h.o.get(U);case 5:n=e.sent,i(n.data.map((function(e){return(0,E.Q)(e)}))),u(null),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.t0.response?f(e.t0.response.data):f(w.ErrFetchingClasses),u(null);case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),p=(0,s.useCallback)(b(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(T.UpdatingClasses),e.next=5,h.o.patch(U,(0,E.u)(n));case 5:s=e.sent,i((function(e){return[(0,E.Q)(s.data)].concat(C(e.filter((function(e){return e.ID!=n.ID}))))})),u(null),t&&t(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?f(e.t0.response.data):f(w.ErrFetchingClasses),u(null),r&&r();case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),j=(0,s.useCallback)(b(c().mark((function e(n,t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(T.DeletingCourse),e.next=5,h.o.delete(U+"?id=".concat(n));case 5:i((function(e){return C(e.filter((function(e){return e.ID!=n})))})),u(null),t&&t(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response?f(e.t0.response.data):f(w.ErrFetchingClasses),u(null),r&&r();case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),v=(0,s.useCallback)(b(c().mark((function e(n,t,r,s){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{f(null),u(T.ManagingCourses),t.forEach(b(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.Courses.filter((function(e){return e.ID==t.ID})).length<1)){e.next=13;break}return console.log("add",t),e.prev=2,e.next=5,h.o.post(U+"/courses",{courseId:t.ID,classId:n.ID});case 5:r=e.sent,console.log(r.data),i((function(e){return C(e.map((function(e){return e.ID==n.ID?(0,E.Q)(r.data):e})))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))),n.Courses.forEach(b(c().mark((function e(r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.filter((function(e){return e.ID==r.ID})).length<1)){e.next=6;break}return console.log("remove",r),e.next=4,h.o.patch(U+"/courses",{courseId:r.ID,classId:n.ID});case 4:s=e.sent,i((function(e){return C(e.map((function(e){return e.ID==n.ID?(0,E.Q)(s.data):e})))}));case 6:case"end":return e.stop()}}),e)})))),u(null),r()}catch(a){a.response&&a.response.data?f(a.response.data):f(w.ErrUpdatingClassCourses),u(null),s()}case 1:case"end":return e.stop()}}),e)}))),[]),S=(0,s.useMemo)((function(){return{classes:a,loading:l,error:m,setError:f,AddClass:g,GetClasses:x,UpdateClass:p,DeleteClass:j,ManageCourse:v}}),[a,l,m]);return(0,r.jsx)(M.Provider,{value:S,children:n})},L=function(){return(0,s.useContext)(M)},F=t(5275);function P(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function q(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){P(a,r,s,i,o,"next",e)}function o(e){P(a,r,s,i,o,"throw",e)}i(void 0)}))}}function O(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var G,V,z="/courses",W="failed to update course users";(V=G||(G={})).FetchingCourses="fetching courses",V.AddingCourse="adding course",V.ManagingUsers="managing users",V.DeletingCourse="deleting course",V.UpdatingCourse="updating course";var H=(0,s.createContext)({courses:null,loading:null,error:null,setError:function(e){},AddCourse:function(e,n,t){},GetCourses:function(){},ManageCourseUsers:function(e,n,t,r){},UpdateCourse:function(e,n,t){},DeleteCourse:function(e,n,t){}}),B=function(e){var n=e.children,t=(0,s.useState)(),a=t[0],i=t[1],o=(0,s.useState)(),l=o[0],u=o[1],d=(0,s.useState)(),m=d[0],f=d[1];(0,s.useEffect)((function(){x()}),[]);var g=(0,s.useCallback)(q(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(n),f(null),u(G.AddingCourse),e.next=6,h.o.post(z,(0,F.Q)(n));case 6:s=e.sent,i((function(e){return O(e).concat([(0,F.J)(s.data)])})),u(null),t(),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),e.t0.response?f(e.t0.response.data):f("failed to add a course"),u(null),r();case 18:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),x=(0,s.useCallback)(q(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(G.FetchingCourses),e.next=5,h.o.get(z);case 5:n=e.sent,i(n.data.map((function(e){return(0,F.J)(e)}))),u(null),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),f("failed to fetch courses"),u(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),p=(0,s.useCallback)(q(c().mark((function e(n,t,r,s){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{f(null),u(G.ManagingUsers),t.forEach(q(c().mark((function e(t){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.Users.filter((function(e){return e.ID==t.ID})).length<1)){e.next=13;break}return console.log("add",t),e.prev=2,e.next=5,h.o.post(z+"/users",{courseId:n.ID,userId:t.ID});case 5:r=e.sent,console.log(r.data),i((function(e){return O(e.map((function(e){return e.ID==n.ID?(0,F.J)(r.data):e})))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))),n.Users.forEach(q(c().mark((function e(r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.filter((function(e){return e.ID==r.ID})).length<1)){e.next=6;break}return console.log("remove",r),e.next=4,h.o.patch(z+"/users",{courseId:n.ID,userId:r.ID});case 4:s=e.sent,i((function(e){return O(e.map((function(e){return e.ID==n.ID?(0,F.J)(s.data):e})))}));case 6:case"end":return e.stop()}}),e)})))),u(null),r()}catch(a){a.response&&a.response.data?f(a.response.data):f(W),u(null),s()}case 1:case"end":return e.stop()}}),e)}))),[]),j=(0,s.useCallback)(q(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(G.UpdatingCourse),e.next=5,h.o.patch(z,(0,F.Q)(n));case 5:s=e.sent,i((function(e){return[(0,F.J)(s.data)].concat(O(e.filter((function(e){return e.ID!=n.ID}))))})),u(null),t&&t(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response&&e.t0.response.data?f(e.t0.response.data):f(W),u(null),r();case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),v=(0,s.useCallback)(q(c().mark((function e(n,t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(G.DeletingCourse),e.next=5,h.o.delete(z+"?id=".concat(n));case 5:i((function(e){return O(e.filter((function(e){return e.ID!=n})))})),u(null),t&&t(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data?f(e.t0.response.data):f(W),u(null),r();case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),S=(0,s.useMemo)((function(){return{courses:a,loading:l,error:m,setError:f,AddCourse:g,GetCourses:x,ManageCourseUsers:p,UpdateCourse:j,DeleteCourse:v}}),[a,l,m,f,g,x]);return(0,r.jsx)(H.Provider,{value:S,children:n})},Y=function(){return(0,s.useContext)(H)},Q=t(5182),$=function(e){return{ID:e.gradeId,Assessment:e.assessment,Mid:e.mid,Final:e.final,Course:(0,F.J)(e.course),User:(0,i.c7)(e.user),ReviewRequested:e.reviewRequested}},J=function(e){return{ID:e.gradeLabelId||"",Label:e.label,Min:e.min,Max:e.max}},K=function(e){return{gradeLabelId:e.ID,label:e.Label,min:e.Min,max:e.Max}};function X(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function Z(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){X(a,r,s,i,o,"next",e)}function o(e){X(a,r,s,i,o,"throw",e)}i(void 0)}))}}function ee(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ne,te,re="/grades",se="/grade-labels";(te=ne||(ne={})).FetchingGrades="fetching grades",te.FetchingGradeLabels="fetching grade labels",te.AddingGradeLabel="adding grade label",te.DeletingGradeLabel="deleting grade label",te.ApprovingGradeReviewRequest="ApprovingGradeReviewRequest",te.RejectingGradeReviewRequest="RejectingGradeReviewRequest";var ae=(0,s.createContext)({grades:null,gradeLabels:null,loading:null,error:null,setError:function(){},GetGrades:function(){},GetGradeLabels:function(){},AddGradeLabel:function(e,n,t){},DeleteGradeLabel:function(e,n,t){},ApproveGradeReviewRequest:function(e,n,t,r){},RejectGradeReviewRequest:function(e,n,t,r){}}),ie=function(e){var n=e.children,t=(0,s.useState)(),a=t[0],i=t[1],o=(0,s.useState)(),l=o[0],u=o[1],d=(0,s.useState)(),m=d[0],f=d[1],g=(0,s.useState)(),x=g[0],p=g[1],j=(0,s.useCallback)(Z(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(null),f(ne.FetchingGrades),e.next=5,h.o.get(re);case 5:n=e.sent,console.log(n.data),console.log(n.data.map((function(e){return $(e)}))),i(n.data.map((function(e){return $(e)}))),f(null),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),p(e.t0),f(null);case 17:case"end":return e.stop()}}),e,null,[[0,12]])}))),[]),v=(0,s.useCallback)(Z(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(null),f(ne.FetchingGrades),e.next=5,h.o.get(se);case 5:n=e.sent,console.log(n.data),u(n.data.map((function(e){return J(e)}))),f(null),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),p(e.t0),f(null);case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),S=(0,s.useCallback)(Z(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(null),f(ne.AddingGradeLabel),e.next=5,h.o.post(se,K(n));case 5:s=e.sent,u((function(e){return[J(s.data)].concat(ee(e))})),f(null),t&&t(),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?p(e.t0.response.data):p("Failed to add grade label"),f(null),r&&r(),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),N=(0,s.useCallback)(Z(c().mark((function e(n,t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(null),f(ne.DeletingGradeLabel),e.next=5,h.o.delete(se+"?id=".concat(n));case 5:e.sent,u((function(e){return ee(e.filter((function(e){return e.ID!=n})))})),f(null),t&&t(),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?p(e.t0.response.data):p("Failed to add grade label"),f(null),r&&r(),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),y=(0,s.useCallback)(Z(c().mark((function e(n,t,r,s){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(null),f(ne.ApprovingGradeReviewRequest),e.next=5,h.o.post(re+"/request-review/approve?course-id=".concat(t,"&user-id=").concat(n));case 5:e.sent,j(),f(null),r&&r(),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?p(e.t0.response.data):p("Failed to approve grade review request"),f(null),s&&s(),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),D=(0,s.useCallback)(Z(c().mark((function e(n,t,r,s){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(null),f(ne.RejectingGradeReviewRequest),e.next=5,h.o.post(re+"/request-review/reject?course-id=".concat(t,"&user-id=").concat(n));case 5:e.sent,j(),f(null),r&&r(),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?p(e.t0.response.data):p("Failed to reject grade review request"),f(null),s&&s(),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]);(0,s.useEffect)((function(){j(),v()}),[]);var _=(0,s.useMemo)((function(){return{grades:a,gradeLabels:l,loading:m,error:x,setError:p,GetGrades:j,GetGradeLabels:v,AddGradeLabel:S,DeleteGradeLabel:N,ApproveGradeReviewRequest:y,RejectGradeReviewRequest:D}}),[a,l,m,x]);return(0,r.jsx)(ae.Provider,{value:_,children:n})},oe=function(){return(0,s.useContext)(ae)},ce=function(e){var n;return{ID:e.id,Title:e.title,Author:e.author,Description:e.description,Cover:e.cover,File:e.file,Uploader:(0,i.c7)(e.uploader),Rating:null!==(n=e.rating)&&void 0!==n?n:0,Course:!!e.course&&(0,F.J)(e.course)}};function le(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function ue(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){le(a,r,s,i,o,"next",e)}function o(e){le(a,r,s,i,o,"throw",e)}i(void 0)}))}}function de(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var he,me,fe="/library/books";(me=he||(he={})).FetchingBooks="Fetching books",me.AddingBook="Adding a book";var ge,xe,pe=(0,s.createContext)({books:null,loading:null,error:null,setError:function(e){},AddBook:function(e,n,t){},GetBooks:function(){}}),je=function(e){var n=e.children;(0,s.useEffect)((function(){x()}),[]);var t=(0,s.useState)(),a=t[0],i=t[1],o=(0,s.useState)(),l=o[0],u=o[1],d=(0,s.useState)(),m=d[0],f=d[1],g=(0,s.useCallback)(ue(c().mark((function e(n,t,r){var s,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(he.AddingBook),(s=new FormData).append("title",n.Title),s.append("author",n.Author),s.append("description",n.Description),s.append("cover",n.Cover),s.append("file",n.File),s.append("uploader",n.Uploader.ID),s.append("course",n.Course?n.Course.ID:""),e.next=13,h.o.post(fe,s);case 13:a=e.sent,i((function(e){return de(e).concat([ce(a.data)])})),u(null),t(),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0),e.t0.response&&e.t0.response.data?f(e.t0.response.data):f("Failed to add a book"),u(null),r();case 25:case"end":return e.stop()}}),e,null,[[0,19]])}))),[]),x=(0,s.useCallback)(ue(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),u(he.FetchingBooks),e.next=5,h.o.get(fe);case 5:n=e.sent,i(n.data.map((function(e){return ce(e)}))),u(null),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),f("Failed to fetch books"),u(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),p=(0,s.useMemo)((function(){return{books:a,loading:l,error:m,setError:f,AddBook:g,GetBooks:x}}),[a,l,m,f,g,x]);return(0,r.jsx)(pe.Provider,{value:p,children:n})},ve=function(){return(0,s.useContext)(pe)},Se=function(e){return{ID:e.messageId,To:(0,i.c7)(e.to),From:(0,i.c7)(e.from),Content:e.content,Date:e.createdAt,Read:!!e.read}},Ne=function(e){return JSON.stringify({messageId:e.ID,to:e.To?(0,i.oE)(e.To):{},from:e.From?(0,i.oE)(e.From):{},content:e.Content,createdAt:e.Date,read:e.Read})};function ye(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function De(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){ye(a,r,s,i,o,"next",e)}function o(e){ye(a,r,s,i,o,"throw",e)}i(void 0)}))}}function _e(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(xe=ge||(ge={})).CONNECT="CONNECT",xe.SEND="SEND",xe.DISCONNECT="DISCONNECTING",xe.RECIEVE="RECIEVE";var Ee,Ae,be,Ce,we,Ie="/messages";(be=Ae||(Ae={})).ErrFailedToFetchMessages="failed to fetch messages",be.ErrFailedToConnectToMessageServer="failed to connect to message server",be.ErrFailedToSendMessage="failed to send message",(we=Ce||(Ce={})).FetchingMessages="fetching messages",we.ConnectingToMessageServer="connecting to message server",we.SendingMessage="sending message";var Te=(0,s.createContext)({messages:null,userMessages:null,setUserMessages:Function,connected:!1,loading:null,error:null,setError:function(e){},ConnectToMessageServer:function(){},DisconnectFromMessageServer:function(){},GetMessages:function(){},SendMessage:function(e,n,t){}}),ke=function(e){var n=e.children,t=(0,s.useState)(),a=t[0],i=t[1],o=(0,s.useState)(),l=o[0],u=o[1],d=(0,s.useState)(!1),f=d[0],g=d[1],x=(0,s.useState)(),p=x[0],j=x[1],v=(0,s.useState)(),S=v[0],N=v[1],y=(0,_.aC)().user;(0,s.useEffect)((function(){D(),E()}),[]),(0,s.useEffect)((function(){f||setTimeout((function(){return E()}),4e3)}),[f]);var D=(0,s.useCallback)(De(c().mark((function e(){var n,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(null),j(Ce.FetchingMessages),e.next=5,h.o.get(Ie);case 5:n=e.sent,i(n.data.map((function(e){return Se(e)}))),t=new Map,n.data.map((function(e){return Se(e)})).map((function(e){var n=e.From.ID!=y.ID?e.From.ID:e.To.ID;t.set(n,t.get(n)?_e(t.get(n)).concat([e]):[e])})),u(t),console.log("_twm"),console.log(t),j(null),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),e.t0.response?N(e.t0.response.data):N(Ae.ErrFailedToFetchMessages),j(null),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,15]])}))),[]),E=(0,s.useCallback)(De(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{(Ee=new WebSocket("".concat(m,"/messages/socket?token=").concat(localStorage.getItem("authToken")))).onopen=function(e){console.log("e open"),console.log(e),g(!0)},Ee.onerror=function(e){console.log("e error"),console.log(e),g(!1)},Ee.onclose=function(e){console.log("e close"),console.log(e),g(!1)},Ee.onmessage=function(e){console.log("e message"),console.log(e),JSON.parse(e.data).event==ge.RECIEVE&&(console.log("recieve"),D())}}catch(n){console.log("error from closing ws"),console.log(n)}case 1:case"end":return e.stop()}}),e)}))),[]),A=(0,s.useCallback)(De(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),[]),b=(0,s.useCallback)(De(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(null),j(Ce.SendingMessage),e.next=5,h.o.post(Ie,Ne(n));case 5:s=e.sent,i((function(e){return[Se(s.data)].concat(_e(e))})),u((function(e){var t=n.To.ID,r=Se(s.data);return e.set(t,e.get(t)?_e(e.get(t)).concat([r]):[r])})),Ee.send(JSON.stringify({event:ge.RECIEVE,data:Ne(Se(s.data))})),j(null),t&&t(),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.response?N(e.t0.response.data):N(Ae.ErrFailedToFetchMessages),j(null),r&&r(),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,13]])}))),[]),C=(0,s.useMemo)((function(){return{messages:a,userMessages:l,setUserMessages:u,connected:f,loading:p,error:S,setError:N,ConnectToMessageServer:E,DisconnectFromMessageServer:A,GetMessages:D,SendMessage:b}}),[a,f,p,S,N,E,A,D,b]);return(0,r.jsx)(Te.Provider,{value:C,children:n})},Ue=t(500);function Me(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}function Re(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function i(e){Me(a,r,s,i,o,"next",e)}function o(e){Me(a,r,s,i,o,"throw",e)}i(void 0)}))}}function Le(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Fe,Pe,qe,Oe,Ge="/sections";(Pe=Fe||(Fe={})).ErrAddingSection="failed to add section",Pe.ErrFetchingSections="failed to fetch sections",Pe.ErrUpdatingSection="failed to update section",Pe.ErrDeletingSection="failed to update section",Pe.ErrAddingSession="failed to add a session",Pe.ErrDeletingSession="failed to delete session",Pe.ErrAddingStident="failed to add a student",Pe.ErrDeletingStudent="failed to delete a student",Pe.ErrManagingStudents="failed to manage students",(Oe=qe||(qe={})).AddingSection="adding section",Oe.FetchingSections="fetching sections",Oe.UpdatingSection="updating section",Oe.DeletingSection="deleting section",Oe.AddingSession="adding session",Oe.DeletingSession="deleting session",Oe.ManagingStudents="managing students";var Ve=(0,s.createContext)({sections:null,loading:null,error:null,setError:function(e){},GetSections:function(){},AddSection:function(e,n,t){},UpdateSection:function(e,n,t){},DeleteSection:function(e,n,t){},AddSession:function(e,n,t,r){},DeleteSession:function(e,n,t,r){},ManageStudents:function(e,n,t,r){}}),ze=function(e){var n=e.children,t=(0,s.useState)(),a=t[0],i=t[1],o=(0,s.useState)(),u=o[0],d=o[1],m=(0,s.useState)(),f=m[0],g=m[1];(0,s.useEffect)((function(){p()}),[]);var x=(0,s.useCallback)(Re(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(null),d(qe.AddingSection),e.next=5,h.o.post(Ge,(0,l.S)(n));case 5:s=e.sent,i((function(e){return Le(e).concat([(0,l.h)(s.data)])})),d(null),t(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response&&e.t0.response.data?g(e.t0.response.data):g(Fe.ErrAddingSection),d(null),r();case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),p=(0,s.useCallback)(Re(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(null),d(qe.FetchingSections),e.next=5,h.o.get(Ge);case 5:n=e.sent,i(n.data.map((function(e){return(0,l.h)(e)}))),d(null),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response&&e.t0.response.data?g(e.t0.response.data):g(Fe.ErrFetchingSections),d(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),j=(0,s.useCallback)(Re(c().mark((function e(n,t,r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(null),d(qe.UpdatingSection),e.next=5,h.o.patch(Ge,(0,l.S)(n));case 5:s=e.sent,i((function(e){return[(0,l.h)(s.data)].concat(Le(e.filter((function(e){return e.ID!=n.ID}))))})),d(null),t&&t(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response?g(e.t0.response.data):g(Fe.ErrUpdatingSection),d(null),r&&r();case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),v=(0,s.useCallback)(Re(c().mark((function e(n,t,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(null),d(qe.DeletingSection),e.next=5,h.o.delete(Ge+"?id=".concat(n));case 5:i((function(e){return Le(e.filter((function(e){return e.ID!=n})))})),d(null),t&&t(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response?g(e.t0.response.data):g(Fe.ErrDeletingSection),d(null),r&&r();case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),S=(0,s.useCallback)(Re(c().mark((function e(n,t,r,s){var a,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,g(null),d(qe.AddingSession),a=0;case 4:if(!(a<t)){e.next=13;break}return n.StartDate=new Date(new Date(n.StartDate).getTime()+6048e5*a),e.next=8,h.o.post("/sessions",(0,Ue.K)(n));case 8:o=e.sent,i((function(e){return Le(e.map((function(e){return e.ID==n.Section.ID?(e.Sessions=Le(e.Sessions).concat([(0,Ue.b)(o.data)]),e):e})))}));case 10:a++,e.next=4;break;case 13:d(null),r(),e.next=23;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),e.t0.response&&e.t0.response.data?g(e.t0.response.data):g(Fe.ErrAddingSession),d(null),s();case 23:case"end":return e.stop()}}),e,null,[[0,17]])}))),[]),N=(0,s.useCallback)(Re(c().mark((function e(n,t,r,s){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(null),d(qe.DeletingSession),e.next=5,h.o.delete("/sessions?id=".concat(t));case 5:i((function(e){return Le(e.map((function(e){return e.ID==n?(e.Sessions=Le(e.Sessions.filter((function(e){return e.ID!=t}))),e):e})))})),d(null),r&&r(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response?g(e.t0.response.data):g(Fe.ErrDeletingSession),d(null),s&&s();case 15:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]),y=(0,s.useCallback)(Re(c().mark((function e(n,t,r,s){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{g(null),d(qe.ManagingStudents),Object.keys(t).forEach(Re(c().mark((function e(r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.Students.filter((function(e){return e.ID==r})).length<1)){e.next=13;break}return console.log("add",r),e.prev=2,e.next=5,h.o.post(Ge+"/students",{userId:r,sectionId:n.ID,courses:t[r][1].map((function(e){return e.ID}))});case 5:s=e.sent,console.log(s.data),i((function(e){return Le(e.map((function(e){return e.ID==n.ID?(0,l.h)(s.data):e})))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))),n.Students.forEach(Re(c().mark((function e(r){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(t).filter((function(e){return e==r.ID})).length<1)){e.next=6;break}return console.log("remove",r),e.next=4,h.o.patch(Ge+"/students",{userId:r.ID,sectionId:n.ID,courses:t[r.ID]?t[r.ID][1].map((function(e){return e.ID})):[]});case 4:s=e.sent,i((function(e){return Le(e.map((function(e){return e.ID==n.ID?(0,l.h)(s.data):e})))}));case 6:case"end":return e.stop()}}),e)})))),d(null),r()}catch(a){a.response&&a.response.data?g(a.response.data):g(Fe.ErrManagingStudents),d(null),s()}case 1:case"end":return e.stop()}}),e)}))),[]),D=(0,s.useMemo)((function(){return{sections:a,loading:u,error:f,setError:g,AddSection:x,GetSections:p,UpdateSection:j,DeleteSection:v,AddSession:S,DeleteSession:N,ManageStudents:y}}),[a,u,f]);return(0,r.jsx)(Ve.Provider,{value:D,children:n})},We=function(){return(0,s.useContext)(Ve)},He=t(2350),Be=t(3398),Ye=function(){console.log("open drawer called"),console.log(window.innerWidth),window.innerWidth>900||(document.getElementById("drawer").className="drawer drawer--open",(0,Be.vg)())},Qe=function(){document.getElementById("drawer").className="drawer",(0,Be.ym)()},$e=function(e){var n=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Be.ez,{onClick:function(){return Qe()}}),(0,r.jsx)("div",{id:"drawer",className:"drawer",children:n})]})},Je=t(6478),Ke=function(){return(0,r.jsx)("img",{src:"/images/logo.png",alt:"logo image",height:"100%",width:"100%",style:{objectFit:"contain"}})},Xe=function(e){var n=e.children;return(0,r.jsx)("div",{className:"side-panel",children:n})},Ze=function(e){var n=e.icon,t=e.title,s=e.subTitle,a=e.trailing,i=e.active,o=void 0!==i&&i,c=e.responsive,l=void 0===c||c,u=e.onClick;return(0,r.jsxs)("div",{onClick:function(){return u()},className:l?o?"side-panel-item side-panel-item--responsive side-panel-item--active":"side-panel-item side-panel-item--responsive":"side-panel-item",children:[(0,r.jsx)("div",{className:"side-panel-item__icon",children:n}),(0,r.jsxs)("div",{className:"side-panel-item__title",children:[(0,r.jsx)("div",{className:"side-panel-item__title--main",children:t}),(0,r.jsx)("div",{className:"side-panel-item__title--sub",children:s})]}),(0,r.jsx)("div",{className:"side-panel-item__trailing",children:a})]})},en=function(e){var n=e.onClick,t=e.parent,a=e.children,i=(0,s.useState)(!1),o=i[0],c=i[1];return(0,r.jsxs)("div",{onClick:function(){n()},className:"expanding-side-panel-item ".concat(o&&"expanding-side-panel-item--expand"),children:[(0,r.jsx)("div",{onClick:function(){c((function(e){return!e}))},className:"expanding-side-panel-item__parent",children:t}),(0,r.jsx)("div",{className:"expanding-side-panel-item__children",children:a})]})},nn=(0,s.memo)((function(e){var n=e.leading,t=e.content,s=e.actions;return(0,r.jsxs)("div",{className:"side-panel-items",children:[(0,r.jsx)("div",{className:"side-panel-items__leading",children:n}),(0,r.jsx)("div",{className:"side-panel-items__content",children:t}),(0,r.jsx)("div",{className:"side-panel-items__actions",children:s})]})}),(function(){return!1})),tn=t(1822),rn=t(8450),sn=function(e){var n=e.headings,t=e.children;return(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:n.map((function(e){return(0,r.jsx)("th",{children:e.Name})}))})}),(0,r.jsx)("tbody",{children:t})]})},an=t(2283),on=t(5410),cn=function(e){var n=e.show,t=e.toggleShow,s=D(),a=s.loading,i=s.error,o=s.setError,c=s.AddAnnouncement,l=(0,an.cI)(),u=l.register,d=l.handleSubmit,h=l.formState.errors;return i&&setTimeout((function(){o(null)}),4e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Add Announcement "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Title",placeholder:"Enter announcement title",refs:u("title",{required:"Field is required",minLength:{value:2,message:"Minimum characters allowed 2"}}),error:h.title}),(0,r.jsx)(tn.UP,{label:"Message",placeholder:"Enter announcement message",refs:u("message",{required:"Field is required",minLength:{value:2,message:"Minimum characters allowed 2"}}),error:h.message})]}),actions:[(0,r.jsx)(He.zx,{onClick:d((function(e){console.log(e),c({Title:e.title,Message:e.message},(function(){alert("Successfully added announcement"),t(!1)}),(function(){}))})),children:a==j.AddingAnnouncement?(0,r.jsx)(rn.d,{}):" Add Announcement "})]}),(0,r.jsx)(on.a,{show:!!i,content:i})]})},ln=function(e){var n=e.show,t=e.toggleShow,a=e.announcement,i=D(),o=i.loading,c=i.error,l=i.setError,u=i.UpdateAnnouncement,d=(0,an.cI)(),h=d.register,m=d.handleSubmit,f=d.formState.errors,g=d.setValue;return c&&setTimeout((function(){l(null)}),4e3),(0,s.useEffect)((function(){a&&(g("title",a.Title),g("message",a.Message))}),[a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Edit Announcement "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Title",placeholder:"Enter announcement title",refs:h("title",{required:"Field is required",minLength:{value:2,message:"Minimum characters allowed 2"}}),error:f.title}),(0,r.jsx)(tn.UP,{label:"Message",placeholder:"Enter announcement message",refs:h("message",{required:"Field is required",minLength:{value:2,message:"Minimum characters allowed 2"}}),error:f.message})]}),actions:[(0,r.jsx)(He.zx,{onClick:m((function(e){console.log(e),u({ID:a.ID,Title:e.title,Message:e.message,PostedBy:a.PostedBy,Section:a.Section,CreatedAt:a.CreatedAt},(function(){alert("Successfully updated announcement"),t(!1)}),(function(){}))})),children:o==j.UpdatingAnnouncement?(0,r.jsx)(rn.d,{}):" Update Announcement "})]}),(0,r.jsx)(on.a,{show:!!c,content:c})]})},un=function(){var e=(0,_.aC)().user,n=D(),t=n.announcements,a=n.connectedToAnnouncementSocket,o=n.loading,c=(n.error,n.DeleteAnnouncement),l=(0,s.useState)(!1),u=l[0],d=l[1],h=(0,s.useState)(),m=h[0],f=h[1],g=(0,s.useState)(!1),x=g[0],p=g[1];return(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)(cn,{show:u,toggleShow:d}),x&&(0,r.jsx)(ln,{show:x&&!!m,toggleShow:p,announcement:m}),(0,r.jsxs)("div",{className:"announcements",children:[(0,r.jsxs)("div",{className:"announcements__title",children:[(0,r.jsx)(Je.iD,{height:1.6,width:1.6,color:"#717f8e"})," ","Announcements",(0,r.jsx)("div",{style:{height:"1.2rem",width:"1.2rem",borderRadius:"50%",backgroundColor:a?"green":"red"}})]}),(0,r.jsxs)("div",{className:"announcements__content",children:[(0,r.jsxs)("div",{className:"announcements__content__leading",children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)("div",{className:"add-announcement",children:e&&e.Type==i.Wg.ADMIN&&(0,r.jsx)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){d(!0)},children:"Add Announcement"})})]}),(0,r.jsx)("div",{className:"announcements__content__main",children:o==j.FetchingAnnouncements?(0,r.jsx)("div",{children:"Loading..."}):t?t.length<1?(0,r.jsx)("div",{children:"Empty "}):(0,r.jsx)(sn,{headings:[{Name:"No",Value:"No"},{Name:"Title",Value:"No"},{Name:"Message",Value:"No"},{Name:"Post Date",Value:"No"},{Name:"Posted By",Value:"No"},{Name:"Posted For",Value:"No"},{Name:"Actions",Value:"No"}],children:t.map((function(n,t){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t+1}),(0,r.jsx)("td",{children:n.Title}),(0,r.jsx)("td",{children:n.Message}),(0,r.jsx)("td",{children:n.CreatedAt&&n.CreatedAt.toLocaleDateString("en-Us",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),(0,r.jsx)("td",{children:!!n.PostedBy&&n.PostedBy.FirstName+" "+n.PostedBy.LastName}),(0,r.jsx)("td",{children:n.Section&&n.Section.ID?n.Section.Class.Name+"-"+n.Section.Name:"Everyone"}),!!n.PostedBy&&n.PostedBy.ID==e.ID&&(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{onClick:function(){f(n),p(!0)},style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{color:"blue"})}),o==j.DeletingAnnouncements?(0,r.jsx)(rn.d,{}):(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.Yh,{onClick:function(){confirm('Are you sure you want to delete "'.concat(n.Title,'"'))&&c(n.ID)},color:"red"})})]})})]},n.ID)}))}):(0,r.jsx)("div",{children:" Null "})})]})]})]})},dn=t(2566),hn=function(e){var n=e.show,t=e.toggleShow,a=(0,an.cI)(),i=a.register,o=a.handleSubmit,c=a.formState.errors,l=a.watch,u=L(),d=u.loading,h=u.error,m=u.setError,f=u.AddClass,g=(0,Q.Qd)().departments,x=(0,s.useState)(),p=x[0],j=x[1];return(0,s.useEffect)((function(){l("department")&&j(g.filter((function(e){return e.ID==l("department")}))[0].Streams)}),[l("department")]),h&&setTimeout((function(){m(null)}),2e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.a,{show:!!h,content:h}),(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Add Class "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Name",placeholder:"Enter class name",refs:i("name",{required:"Field is required",minLength:{value:2,message:"Minimum characters 2"}}),error:c.name}),(0,r.jsx)(tn.UP,{label:"Occupation",placeholder:"Enter occupation",refs:i("subName"),error:c.subName,name:"subName"}),!!g&&(0,r.jsx)(dn.v,{label:"Department",options:g&&g.map((function(e){return{name:e.Name,value:e.ID}})),refs:i("department",{required:"Field is required"}),error:c.department}),!!g&&(0,r.jsx)(dn.v,{label:"Stream",options:p&&p.map((function(e){return{name:e.Name,value:e.ID}})),refs:i("stream"),error:c.stream})]}),actions:[(0,r.jsx)(He.zx,{onClick:o((function(e){console.log(e),f({Name:e.name,SubName:e.subName,Stream:p&&e.stream?p.filter((function(n){return n.ID==e.stream}))[0]:null,Department:g.filter((function(n){return n.ID==e.department}))[0]},(function(){alert("Successfully added class"),t(!1)}),(function(){}))})),children:d==T.AddingClass?(0,r.jsx)(rn.d,{}):"Add Class"})]})]})},mn=function(e){var n=e.show,t=e.toggleShow,a=e._class,i=(0,an.cI)(),o=i.register,c=i.handleSubmit,l=i.formState.errors,u=i.setValue,d=L(),h=d.loading,m=d.error,f=d.setError,g=d.UpdateClass;(0,Q.Qd)().departments;(0,s.useEffect)((function(){}),[]);return m&&setTimeout((function(){f(null)}),2e3),(0,s.useEffect)((function(){a&&(u("name",a.Name),u("subName",a.SubName))}),[a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.a,{show:!!m,content:m}),(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Update Class "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Name",placeholder:"Enter class name",refs:o("name",{required:"Field is required",minLength:{value:2,message:"Minimum characters 2"}}),error:l.name}),(0,r.jsx)(tn.UP,{label:"Occupation",placeholder:"Enter occupation",refs:o("subName",{required:"Field is required",minLength:{value:2,message:"Minimum characters 2"}}),error:l.subName,name:"subName"})]}),actions:[(0,r.jsx)(He.zx,{onClick:c((function(e){console.log(e),g({ID:a&&a.ID,Name:e.name,SubName:e.subName,Stream:a&&a.Stream,Department:a&&a.Department},(function(){alert("Successfully updated class"),t(!1)}),(function(){}))})),children:h==T.UpdatingClasses?(0,r.jsx)(rn.d,{}):"Update Class"})]})]})},fn=t(3359);function gn(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var xn=function(e){var n=e.show,t=e.toggleShow,a=e._class,i=L(),o=i.loading,c=i.error,l=i.setError,u=i.ManageCourse,d=Y().courses,h=(0,s.useState)(),m=h[0],f=h[1];return c&&setTimeout((function(){l(null)}),4e3),(0,s.useEffect)((function(){a&&f(a.Courses)}),[a,n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsxs)("div",{children:[" ","Manage Courses for ".concat(a&&a.Name)," "]}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1),f([])},children:"Cancel"})],content:(0,r.jsx)("div",{children:(0,r.jsx)(sn,{headings:[{Name:"Name",Value:"name"},{Name:"Credit Hour"},{Name:"Actions"}],children:d&&d.map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.Name}),(0,r.jsx)("td",{children:e.CreditHr}),(0,r.jsx)("td",{children:(0,r.jsx)(fn.J,{value:!!m&&m.filter((function(n){return n.ID==e.ID})).length>0,onChange:function(n){m?m.filter((function(n){return n.ID==e.ID})).length>0?f((function(n){return gn(n.filter((function(n){return n.ID!=e.ID})))})):f((function(n){return gn(n).concat([e])})):f([e])}})})]},e.ID)}))})}),actions:[(0,r.jsx)(He.zx,{disabled:o==T.ManagingCourses,onClick:function(){o!=T.ManagingCourses&&u(a,m,(function(){alert("Successfully updated course list"),t(!1)}),(function(){}))},children:o==T.ManagingCourses?(0,r.jsx)(rn.d,{}):"Update"})]}),(0,r.jsx)(on.a,{show:!!c,content:c})]})},pn=function(){var e=(0,_.aC)().user,n=L(),t=n.classes,a=n.loading,o=(n.error,n.DeleteClass),c=(0,s.useState)(!1),l=c[0],u=c[1],d=(0,s.useState)(!1),h=d[0],m=d[1],f=(0,s.useState)(!1),g=f[0],x=f[1],p=(0,s.useState)(),j=p[0],v=p[1],S=(0,s.useState)(t),N=S[0],y=S[1],D=(0,an.cI)(),E=D.register,A=D.handleSubmit,b=D.setValue,C=function(e){var n=e.searchQuery;if(""!=n){n=new RegExp(n,"i");var r=t&&t.filter((function(e){return e.Name.search(n)>=0}));console.log(r),y(r)}else y(t)};return(0,s.useEffect)((function(){b("searchQuery",""),y(t)}),[t]),(0,r.jsxs)(r.Fragment,{children:[l&&(0,r.jsx)(hn,{show:l,toggleShow:u}),h&&!!j&&(0,r.jsx)(mn,{show:h&&!!j,toggleShow:m,_class:j}),(0,r.jsx)(xn,{show:g&&!!j,toggleShow:x,_class:j}),(0,r.jsxs)("div",{className:"classes",children:[(0,r.jsxs)("div",{className:"classes__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Classes"]}),(0,r.jsxs)("div",{className:"classes__content",children:[(0,r.jsxs)("div",{className:"classes__content__leading",children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{refs:E("searchQuery"),onKeyDown:function(e){console.log(e.key),"Enter"==e.key&&A(C)()},size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)("div",{className:"add-class",children:e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){u(!0)},children:"Add Class"})})]}),(0,r.jsx)("div",{className:"classes_content__main",children:a==T.FetchingClasses?(0,r.jsx)("div",{children:" Loading ... "}):t?t.length<1?(0,r.jsx)("div",{children:" Empty "}):(0,r.jsx)(sn,{headings:[{Name:"No",Value:"Value"},{Name:"Level",Value:"Name"},{Name:"Occupation",Value:"Sub Name"},{Name:"Department",Value:"Department"},{Name:"Stream",Value:"Name"},{Name:"Courses",Value:"Department"},{Name:"Sections",Value:"Department"},{Name:"Students",Value:"Students"},{Name:"Master Sheet",Value:"Students"},e&&e.Type==i.Wg.DEPARTMENT_HEAD&&{Name:"Actions",Value:"Actions"}],children:N.map((function(n,t){var s;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t+1}),(0,r.jsx)("td",{children:n.Name}),(0,r.jsx)("td",{children:n.SubName}),(0,r.jsx)("td",{children:n.Department.Name}),(0,r.jsx)("td",{children:n.Stream.Name}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.4rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",alignSelf:"center",justifyContent:"flex-start"},children:[!!n.Courses&&n.Courses.length,e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)("div",{className:"pointer",children:(0,r.jsx)(Je.vV,{onClick:function(){v(n),x(!0)},color:"blue"})})]})}),(0,r.jsx)("td",{children:null!==(s=!!n.Sections&&n.Sections.length)&&void 0!==s?s:0}),(0,r.jsx)("td",{children:n.Students?n.Students.length:0}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{style:{height:"4.4rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",alignSelf:"center",justifyContent:"flex-start"},children:(0,r.jsxs)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){},children:[" ","Export"," "]})})}),e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.4rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",alignSelf:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{onClick:function(){v(n),m(!0)},className:"pointer",children:(0,r.jsx)(Je.vV,{color:"blue"})}),(0,r.jsx)("div",{onClick:function(){confirm("Are you sure to delete class "+n.Name)&&o(n.ID,(function(){alert("Successfully deleted class")}),(function(){alert("Failed to delete class")}))},className:"pointer",children:(0,r.jsx)(Je.Yh,{color:"red"})})]})})]},n.ID)}))}):(0,r.jsx)("div",{children:" Null "})})]})]})]})},jn=function(e){var n=e.show,t=e.toggleShow,s=(0,an.cI)(),a=s.register,i=s.handleSubmit,o=s.formState.errors,c=Y(),l=c.loading,u=c.error,d=c.setError,h=c.AddCourse,m=c.courses;return u&&setTimeout((function(){d(null)}),2e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.a,{show:!!u,content:u}),(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Add Course "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Name",placeholder:"Enter course name",refs:a("name",{required:"Field is required",minLength:{value:2,message:"Minimum characters 2"}}),error:o.name}),(0,r.jsx)(tn.UP,{label:"Credit Hour",placeholder:"Enter course credit hour",type:tn.Zi.NUMBER,refs:a("creditHr",{required:"Field is required"}),error:o.creditHr,name:"creditHr"}),(0,r.jsx)(tn.UP,{type:tn.Zi.COLOR,label:"Color",placeholder:"Enter course color (in hex format)",refs:a("color",{required:"Field is required"}),error:o.color}),(0,r.jsx)(dn.v,{label:"Prerequisite",refs:a("prerequisites"),error:o.prerequisites,multiple:!0,size:m?m.length:0,options:m&&m.map((function(e){return{name:e.Name,value:e.ID}}))})]}),actions:[(0,r.jsx)(He.zx,{onClick:i((function(e){console.log(e),h({Name:e.name,CreditHr:e.creditHr,Color:e.color,Prerequisites:""!=e.prerequisites?e.prerequisites.map((function(e){return m.filter((function(n){return e==n.ID}))[0]})):[]},(function(){alert("Successfully added course"),t(!1)}),(function(){}))})),children:l==G.AddingCourse?(0,r.jsx)(rn.d,{}):"Add Course"})]})]})};function vn(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Sn=function(e){var n=e.show,t=e.toggleShow,a=e.course,o=(0,_.aC)().users,c=Y(),l=c.loading,u=c.error,d=c.setError,h=c.ManageCourseUsers,m=(0,s.useState)(),f=m[0],g=m[1];u&&setTimeout((function(){d(null)}),4e3),(0,s.useEffect)((function(){a&&g(a.Users)}),[a,n]);var x=(0,s.useState)(o),p=x[0],j=x[1],v=(0,an.cI)(),S=v.register,N=v.handleSubmit,y=v.setValue,D=function(e){console.log("searching users"),console.log(e);var n=e.searchQuery;if(""!=n){n=new RegExp(n,"i");var t=o&&o.filter((function(e){return e.FirstName.search(n)>=0||e.LastName.search(n)>=0||e.Email.search(n)>=0}));console.log(t),j(t)}else j(o)};return(0,s.useEffect)((function(){y("searchQuery",""),j(o)}),[o]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsxs)("div",{children:[" ","Manage Courses for ".concat(a&&a.Name)," "]}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{refs:S("searchQuery"),onKeyDown:function(e){console.log(e.key),"Enter"==e.key&&N(D)()},size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)(sn,{headings:[{Name:"Name",Value:"name"},{Name:"Email"},{Name:"Actions"}],children:p&&p.filter((function(e){return e.Type==i.Wg.INSTRUCTOR})).map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.FirstName+" "+e.LastName}),(0,r.jsx)("td",{children:e.Email}),(0,r.jsx)("td",{children:(0,r.jsx)(fn.J,{value:!!f&&f.filter((function(n){return n.ID==e.ID})).length>0,onChange:function(n){f?f.filter((function(n){return n.ID==e.ID})).length>0?g((function(n){return vn(n.filter((function(n){return n.ID!=e.ID})))})):g((function(n){return vn(n).concat([e])})):g([e])}})})]},e.ID)}))})]}),actions:[(0,r.jsx)(He.zx,{disabled:l==G.ManagingUsers,onClick:function(){l!=G.ManagingUsers&&h(a,f,(function(){alert("Successfully updated course instructors"),t(!1)}),(function(){}))},children:l==G.ManagingUsers?(0,r.jsx)(rn.d,{}):"Update"})]}),(0,r.jsx)(on.a,{show:!!u,content:u})]})},Nn=function(e){var n=e.show,t=e.toggleShow,a=e.course,i=(0,an.cI)(),o=i.register,c=i.handleSubmit,l=i.formState.errors,u=i.setValue,d=Y(),h=d.loading,m=d.error,f=d.setError,g=d.UpdateCourse;return m&&setTimeout((function(){f(null)}),2e3),(0,s.useEffect)((function(){a&&(u("name",a.Name),u("creditHr",a.CreditHr),u("color",a.Color))}),[a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.a,{show:!!m,content:m}),(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Edit Course "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Name",placeholder:"Enter course name",refs:o("name",{required:"Field is required",minLength:{value:2,message:"Minimum characters 2"}}),error:l.name}),(0,r.jsx)(tn.UP,{label:"Credit Hour",placeholder:"Enter course credit hour",type:tn.Zi.NUMBER,refs:o("creditHr",{required:"Field is required"}),error:l.creditHr,name:"creditHr"}),(0,r.jsx)(tn.UP,{type:tn.Zi.COLOR,label:"Color",placeholder:"Enter course color (in hex format)",refs:o("color",{required:"Field is required"}),error:l.color})]}),actions:[(0,r.jsx)(He.zx,{onClick:c((function(e){console.log(e),g({ID:a.ID,Name:e.name,CreditHr:e.creditHr,Color:e.color,Users:a.Users,Prerequisites:a.Prerequisites},(function(){alert("Successfully updated course"),t(!1)}),(function(){}))})),children:h==G.UpdatingCourse?(0,r.jsx)(rn.d,{}):"Update Course"})]})]})};function yn(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Dn=function(e){var n=e.show,t=e.toggleShow,a=e.course,o=(0,_.aC)().users,c=Y(),l=c.loading,u=c.error,d=c.setError,h=c.ManageCourseUsers,m=(0,s.useState)(),f=m[0],g=m[1];u&&setTimeout((function(){d(null)}),4e3),(0,s.useEffect)((function(){a&&g(a.Users)}),[a,n]);var x=(0,s.useState)(o),p=x[0],j=x[1],v=(0,an.cI)(),S=v.register,N=v.handleSubmit,y=v.setValue,D=function(e){console.log("searching users"),console.log(e);var n=e.searchQuery;if(""!=n){n=new RegExp(n,"i");var t=o&&o.filter((function(e){return e.FirstName.search(n)>=0||e.LastName.search(n)>=0||e.Email.search(n)>=0}));console.log(t),j(t)}else j(o)};return(0,s.useEffect)((function(){y("searchQuery",""),j(o)}),[o]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsxs)("div",{children:[" ","Manage Supervisors for ".concat(a&&a.Name)," "]}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{refs:S("searchQuery"),onKeyDown:function(e){console.log(e.key),"Enter"==e.key&&N(D)()},size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)(sn,{headings:[{Name:"Name",Value:"name"},{Name:"Email"},{Name:"Actions"}],children:p&&p.filter((function(e){return e.Type==i.Wg.SUPERVISOR})).map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.FirstName+" "+e.LastName}),(0,r.jsx)("td",{children:e.Email}),(0,r.jsx)("td",{children:(0,r.jsx)(fn.J,{value:!!f&&f.filter((function(n){return n.ID==e.ID})).length>0,onChange:function(n){f?f.filter((function(n){return n.ID==e.ID})).length>0?g((function(n){return yn(n.filter((function(n){return n.ID!=e.ID})))})):g((function(n){return yn(n).concat([e])})):g([e])}})})]},e.ID)}))})]}),actions:[(0,r.jsx)(He.zx,{disabled:l==G.ManagingUsers,onClick:function(){l!=G.ManagingUsers&&h(a,f,(function(){alert("Successfully updated course instructors"),t(!1)}),(function(){}))},children:l==G.ManagingUsers?(0,r.jsx)(rn.d,{}):"Update"})]}),(0,r.jsx)(on.a,{show:!!u,content:u})]})},_n=function(){var e=Y(),n=e.courses,t=e.loading,a=(e.error,e.setError,e.DeleteCourse),o=(0,s.useState)(!1),c=o[0],l=o[1],u=(0,s.useState)(!1),d=u[0],h=u[1],m=(0,s.useState)(!1),f=m[0],g=m[1],x=(0,s.useState)(!1),p=x[0],j=x[1],v=(0,s.useState)(),S=v[0],N=v[1],y=(0,_.aC)().user,D=(0,s.useState)(n),E=D[0],A=D[1],b=(0,an.cI)(),C=b.register,w=b.handleSubmit,I=b.setValue,T=function(e){var t=e.searchQuery;if(""!=t){t=new RegExp(t,"i");var r=n&&n.filter((function(e){return e.Name.search(t)>=0}));console.log(r),A(r)}else A(n)};return(0,s.useEffect)((function(){I("searchQuery",""),A(n)}),[n]),(0,r.jsxs)(r.Fragment,{children:[!!c&&(0,r.jsx)(jn,{show:c,toggleShow:l}),!!d&&(0,r.jsx)(Sn,{show:d&&!!S,toggleShow:h,course:S}),!!f&&(0,r.jsx)(Dn,{show:f&&!!S,toggleShow:g,course:S}),!!S&&p&&(0,r.jsx)(Nn,{show:p&&!!S,course:S,toggleShow:j}),(0,r.jsxs)("div",{className:"courses",children:[(0,r.jsxs)("div",{className:"courses__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Courses"]}),(0,r.jsxs)("div",{className:"courses__content",children:[(0,r.jsxs)("div",{className:"courses__content__leading",children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{refs:C("searchQuery"),onKeyDown:function(e){console.log(e.key),"Enter"==e.key&&w(T)()},size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)("div",{className:"add-course",children:y&&(y.Type==i.Wg.SUPER_ADMIN||y.Type==i.Wg.DEPARTMENT_HEAD)&&(0,r.jsx)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){l(!0)},children:"Add Course"})})]}),(0,r.jsx)("div",{className:"courses__content__main",children:t==G.FetchingCourses?(0,r.jsx)(rn.X,{}):n?n.length<1?(0,r.jsx)("div",{children:" Empty "}):(0,r.jsx)(sn,{headings:[{Name:"No"},{Name:"Name"},{Name:"CreditHr"},{Name:"Color"},{Name:"Prerequisites"},{Name:"Instructors"},{Name:"Supervisors"},y&&(y.Type==i.Wg.SUPER_ADMIN||y.Type==i.Wg.DEPARTMENT_HEAD)&&{Name:"Actions"}],children:E&&E.length>0&&E.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n+1}),(0,r.jsx)("td",{children:e.Name}),(0,r.jsx)("td",{children:e.CreditHr}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{style:{height:"2.4rem",width:"2.4rem",borderRadius:"50%",backgroundColor:e.Color,border:"1px solid #ccc"}})}),(0,r.jsx)("td",{children:e.Prerequisites.length>0?e.Prerequisites.map((function(n,t){return n.Name+(t>=0&&t<e.Prerequisites.length-1?", ":"")})):"-"}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[e.Users.filter((function(e){return e.Type==i.Wg.INSTRUCTOR})).length,y&&(y.Type==i.Wg.SUPER_ADMIN||y.Type==i.Wg.DEPARTMENT_HEAD)&&(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{onClick:function(){N(e),h(!0)},color:"blue"})})]})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[e.Users.filter((function(e){return e.Type==i.Wg.SUPERVISOR})).length,y&&(y.Type==i.Wg.SUPER_ADMIN||y.Type==i.Wg.DEPARTMENT_HEAD)&&(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{color:"blue",onClick:function(){N(e),g(!0)}})})]})}),y&&(y.Type==i.Wg.SUPER_ADMIN||y.Type==i.Wg.DEPARTMENT_HEAD)&&(0,r.jsxs)("td",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{onClick:function(){N(e),j(!0)},style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{color:"blue"})}),(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.Yh,{onClick:function(){confirm('Are you sure you want to delete "'.concat(e.Name,'"'))&&a(e.ID,(function(){return alert("Successfully deleted course")}))},color:"red"})})]})]},e.ID)}))}):(0,r.jsx)("div",{children:" null "})}),(0,r.jsx)("div",{className:"courses__content__actions"})]})]})]})};function En(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var An=["January","February","March","April","May","June","July","August","September","October","November","December"],bn=function(){var e=(0,s.useState)(new Date((new Date).setDate(1))),n=e[0],t=e[1],a=new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),i=new Date(n.getFullYear(),n.getMonth(),0).getDate(),o=n.getDay(),c=7-new Date(n.getFullYear(),n.getMonth()+1,0).getDay()-1,l=(0,s.useState)(new Date(Date.now())),u=l[0],d=l[1];return(0,r.jsxs)("div",{className:"calendar",children:[(0,r.jsxs)("div",{className:"calendar__heading",children:[(0,r.jsx)("div",{className:"title",children:"Calendar"}),(0,r.jsxs)("div",{className:"actions",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"event"}),(0,r.jsx)("div",{children:"Event"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"holiday"}),(0,r.jsx)("div",{children:"Holiday"})]})]})]}),(0,r.jsxs)("div",{className:"month",children:[(0,r.jsx)("div",{onClick:function(){t((function(e){return new Date(new Date(e).setMonth(e.getMonth()-1))}))},className:"prev",children:(0,r.jsx)(Je.wy,{height:1,width:1,color:"grey"})}),(0,r.jsx)("div",{className:"date",children:(0,r.jsx)("h1",{children:An[n.getMonth()]+" "+n.getFullYear()})}),(0,r.jsx)("div",{onClick:function(){t((function(e){return new Date(new Date(e).setMonth(e.getMonth()+1))}))},className:"next",children:(0,r.jsx)(Je.XC,{height:1,width:1,color:"grey"})})]}),(0,r.jsxs)("div",{className:"calendar__weekdays",children:[(0,r.jsx)("div",{children:"S"}),(0,r.jsx)("div",{children:"M"}),(0,r.jsx)("div",{children:"T"}),(0,r.jsx)("div",{children:"W"}),(0,r.jsx)("div",{children:"T"}),(0,r.jsx)("div",{children:"F"}),(0,r.jsx)("div",{children:"S"})]}),(0,r.jsxs)("div",{className:"days",children:[En(new Array(o)).map((function(e,n){return(0,r.jsx)("div",{className:"prev-date",children:i-(o-n)+1})})),En(Array(a)).map((function(e,t){return(0,r.jsx)("div",{className:(s=u,a=new Date(n.getFullYear(),n.getMonth(),t+1),s.getFullYear()==a.getFullYear()&&s.getMonth()==a.getMonth()&&s.getDate()==a.getDate()?"selected":""),onClick:function(){d(new Date(n.getFullYear(),n.getMonth(),t+1))},children:t+1});var s,a})),En(Array(c)).map((function(e,n){return(0,r.jsx)("div",{className:"next-date",children:n+1})}))]})]})},Cn=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("table",{id:"q-graph",children:[(0,r.jsxs)("caption",{children:[(0,r.jsx)("p",{children:"Students By Year"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"sent",children:"Male"}),(0,r.jsx)("div",{className:"paid",children:"Female"})]})]}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{className:"qtr",id:"q1",children:[(0,r.jsx)("th",{scope:"row",children:"2019"}),(0,r.jsx)("td",{className:"sent bar",style:{height:"111px"},children:(0,r.jsx)("p",{children:"$18,450.00"})}),(0,r.jsx)("td",{className:"paid bar",style:{height:"99px"},children:(0,r.jsx)("p",{children:"$16,500.00"})})]}),(0,r.jsxs)("tr",{className:"qtr",id:"q2",children:[(0,r.jsx)("th",{scope:"row",children:"2020"}),(0,r.jsx)("td",{className:"sent bar",style:{height:"206px"},children:(0,r.jsx)("p",{children:"$34,340.72"})}),(0,r.jsx)("td",{className:"paid bar",style:{height:"194px"},children:(0,r.jsx)("p",{children:"$32,340.72"})})]}),(0,r.jsxs)("tr",{className:"qtr",id:"q3",children:[(0,r.jsx)("th",{scope:"row",children:"2021"}),(0,r.jsx)("td",{className:"sent bar",style:{height:"259px"},children:(0,r.jsx)("p",{children:"$43,145.52"})}),(0,r.jsx)("td",{className:"paid bar",style:{height:"193px"},children:(0,r.jsx)("p",{children:"$32,225.52"})})]}),(0,r.jsxs)("tr",{className:"qtr",id:"q4",children:[(0,r.jsx)("th",{scope:"row",children:"2022"}),(0,r.jsx)("td",{className:"sent bar",style:{height:"110px"},children:(0,r.jsx)("p",{children:"$18,415.96"})}),(0,r.jsx)("td",{className:"paid bar",style:{height:"195px"},children:(0,r.jsx)("p",{children:"$32,425.00"})})]})]})]}),(0,r.jsxs)("div",{id:"ticks",children:[(0,r.jsx)("div",{className:"tick",style:{height:"52px"},children:(0,r.jsx)("p",{children:"6000"})}),(0,r.jsx)("div",{className:"tick",style:{height:"52px"},children:(0,r.jsx)("p",{children:"3500"})}),(0,r.jsx)("div",{className:"tick",style:{height:"52px"},children:(0,r.jsx)("p",{children:"2000"})}),(0,r.jsx)("div",{className:"tick",style:{height:"52px"},children:(0,r.jsx)("p",{children:"1000"})}),(0,r.jsx)("div",{className:"tick",style:{height:"52px"},children:(0,r.jsx)("p",{children:"500"})})]})]})},wn=function(e){var n=e.label,t=e.content,s=e.average;return(0,r.jsxs)("div",{className:"dashboard-user-tile",children:[(0,r.jsx)("div",{className:"dashboard-user-tile__label",children:n}),(0,r.jsx)("div",{className:"dashboard-user-tile__content",children:t}),(0,r.jsx)("div",{className:"dashboard-user-tile__graph",children:(0,r.jsx)("img",{src:"/images/bar_chart.png",alt:"Bar chart image"})}),(0,r.jsxs)("div",{className:"dashboard-user-tile__average ".concat(s<0&&"dashboard-user-tile__average--decreasing"),children:[(0,r.jsx)(Je.XC,{color:"black"}),s+"%"]})]})},In=function(){var e=(0,_.aC)(),n=(e.user,e.users),t=e.GetUsers,a=(0,Q.Qd)().departments,o=D().announcements;return(0,s.useEffect)((function(){t()}),[]),(0,s.useEffect)((function(){}),[o]),(0,r.jsxs)("div",{className:"dashboard",children:[(0,r.jsxs)("div",{className:"dashboard__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Dashboard"]}),(0,r.jsxs)("div",{className:"dashboard__content",children:[(0,r.jsxs)("div",{className:"dashboard__content__users",children:[(0,r.jsx)(wn,{label:"Total Employees",content:n&&n.filter((function(e){return e.Type!=i.Wg.STUDENT&&!!e.Verified})).length.toString(),average:0}),(0,r.jsx)(wn,{label:"Total Students",content:n&&n.filter((function(e){return e.Type==i.Wg.STUDENT&&!!e.Verified})).length.toString(),average:0}),(0,r.jsx)(wn,{label:"Total Departments",content:a&&a.length.toString(),average:0}),(0,r.jsx)(wn,{label:"Total Revenue",content:"0",average:0})]}),(0,r.jsxs)("div",{className:"dashboard__content__misc",children:[(0,r.jsx)("div",{className:"dashboard__content__misc__attendance-graph",children:(0,r.jsx)(Cn,{})}),(0,r.jsx)("div",{className:"dashboard__content__misc__announcements",children:!!o&&o.map((function(e){return(0,r.jsxs)("div",{className:"announcement-tile",children:[(0,r.jsxs)("div",{className:"announcement-tile__title",children:[(0,r.jsx)(Je.iD,{color:"lightblue"}),e.Title]}),(0,r.jsx)("div",{className:"announcement-tile__date",children:!!e.CreatedAt&&e.CreatedAt.toLocaleDateString("en-US",{dateStyle:"long"})})]})}))}),(0,r.jsx)("div",{className:"dashboard__content__misc__calendar",children:(0,r.jsx)(bn,{})})]})]})]})},Tn=function(e){var n=e.show,t=e.toggleShow,s=(0,an.cI)(),a=s.register,i=s.handleSubmit,o=s.formState.errors,c=(0,Q.Qd)(),l=c.loading,u=c.error,d=c.setError,h=c.AddDepartment;return u&&setTimeout((function(){d(null)}),2e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.a,{show:!!u,content:u}),(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Add Department "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsx)("div",{style:{display:"grid",gridAutoFlow:"row",rowGap:"1.2rem"},children:(0,r.jsx)(tn.UP,{disabled:l==Q.z3.AddingDepartment,label:"Name *",placeholder:"Enter department name",refs:a("name",{required:{value:!0,message:"Field is required"},minLength:{value:2,message:"Name must be greater than 2 characters"}}),error:o.name,name:"name"})}),actions:[(0,r.jsx)(He.zx,{disabled:l==Q.z3.AddingDepartment,color:He.rp.MAIN,onClick:i((function(e){console.log(e);var n={Name:e.name};h(n,(function(){alert("Successfully added department"),t(!1)}),(function(){}))})),children:l==Q.z3.AddingDepartment?(0,r.jsx)(rn.d,{}):"Add Department"})]})]})},kn=function(e){var n=e.show,t=e.toggleShow,a=e.department,o=(0,an.cI)(),c=o.register,l=o.handleSubmit,u=o.formState.errors,d=o.setValue,h=(0,Q.Qd)(),m=h.loading,f=h.error,g=h.setError,x=h.UpdateDepartment,p=(0,_.aC)(),j=p.users,v=p.GetUsers;return(0,s.useEffect)((function(){return v()}),[]),(0,s.useEffect)((function(){var e,n;a&&(d("name",null!==(e=a.Name)&&void 0!==e?e:""),d("head",null!==(n=a.Head.ID)&&void 0!==n?n:""))}),[n]),f&&setTimeout((function(){g(null)}),2e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.a,{show:!!f,content:f}),(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Update Department "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{style:{display:"grid",gridAutoFlow:"row",rowGap:"1.2rem"},children:[(0,r.jsx)(tn.UP,{disabled:m==Q.z3.AddingDepartment,label:"Name *",placeholder:"Enter department name",refs:c("name",{required:{value:!0,message:"Field is required"},minLength:{value:2,message:"Name must be greater than 2 characters"}}),error:u.name,name:"name"}),(0,r.jsx)(dn.v,{label:"Head",refs:c("head",{required:"Field is required",validate:function(e){return e?null:"Choose user"}}),error:u.head,options:j&&j.filter((function(e){return e.Type==i.Wg.DEPARTMENT_HEAD&&e.Verified})).map((function(e){return{name:e.FirstName+" "+e.LastName,value:e.ID}}))})]}),actions:[(0,r.jsx)(He.zx,{disabled:m==Q.z3.UpdatingDepartment,color:He.rp.MAIN,onClick:l((function(e){var n={ID:a.ID,Name:e.name,Head:j.filter((function(n){return n.ID==e.head}))[0],Classes:a.Classes};x(n,(function(){alert("Successfully updated department"),t(!1)}),(function(){}))})),children:m==Q.z3.UpdatingDepartment?(0,r.jsx)(rn.d,{}):"Update Department"})]})]})},Un=function(){var e=(0,Q.Qd)(),n=e.departments,t=e.loading,a=(e.error,e.DeleteDepartment),o=(0,s.useState)(!1),c=o[0],l=o[1],u=(0,s.useState)(),d=u[0],h=u[1],m=(0,_.aC)().user,f=(0,s.useState)(n),g=f[0],x=f[1],p=(0,an.cI)(),j=p.register,v=p.handleSubmit,S=p.setValue,N=function(e){console.log("searching users"),console.log(e);var t=e.searchQuery;if(""!=t){t=new RegExp(t,"i");var r=n&&n.filter((function(e){return e.Name.search(t)>=0}));console.log(r),x(r)}else x(n)};return(0,s.useEffect)((function(){S("searchQuery",""),x(n)}),[n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Tn,{show:c,toggleShow:l}),(0,r.jsx)(kn,{department:d,show:!!d,toggleShow:function(){return h(null)}}),(0,r.jsxs)("div",{className:"departments",children:[(0,r.jsxs)("div",{className:"departments__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," ","Departments"]}),(0,r.jsxs)("div",{className:"departments__content",children:[(0,r.jsxs)("div",{className:"departments__content__leading",children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{refs:j("searchQuery"),onKeyDown:function(e){console.log(e.key),"Enter"==e.key&&v(N)()},size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)("div",{className:"add-department",children:m&&(m.Type==i.Wg.SUPER_ADMIN||m.Type==i.Wg.ADMIN)&&(0,r.jsx)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){l(!0)},children:"Add Department"})})]}),(0,r.jsx)("div",{className:"departments__content__main",children:t==Q.z3.FetchingAllDepartments?(0,r.jsx)(rn.X,{}):null==n?(0,r.jsx)("div",{children:" null "}):n.length<1?(0,r.jsx)("div",{children:" Empty "}):(0,r.jsx)(sn,{headings:[{Name:"No"},{Name:"Name"},{Name:"Head"},{Name:"Classes"},m&&(m.Type==i.Wg.SUPER_ADMIN||m.Type==i.Wg.ADMIN)&&{Name:"Actions"}],children:g&&g.length>0&&g.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n+1}),(0,r.jsx)("td",{children:e.Name}),(0,r.jsx)("td",{style:{textTransform:"capitalize"},children:e.Head.ID?e.Head.FirstName+" "+e.Head.LastName:"Not Set"}),(0,r.jsx)("td",{children:e.Classes&&e.Classes.length||0}),m&&(m.Type==i.Wg.SUPER_ADMIN||m.Type==i.Wg.ADMIN)&&(0,r.jsxs)("td",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{onClick:function(){return h(e)},color:"blue"})}),(0,r.jsx)("div",{onClick:function(){confirm('Are you sure you want to delete "'.concat(e.Name,'"'))&&a(e.ID,(function(){alert("Successfully deleted department")}))},style:{cursor:"pointer"},children:(0,r.jsx)(Je.Yh,{color:"red"})})]})]},e.ID)}))})}),(0,r.jsx)("div",{className:"departments__content__actions"})]})]})]})},Mn=function(e){var n=e.show,t=e.toggleShow,s=oe(),a=s.AddGradeLabel,i=s.loading,o=s.error,c=s.setError,l=(0,an.cI)(),u=l.register,d=l.handleSubmit,h=l.formState.errors;o&&setTimeout((function(){c(null)}),3e3);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Add Grade Label "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Label",placeholder:"Enter grade label (eg. A+)",refs:u("label",{required:"Field is required"}),error:h.label}),(0,r.jsx)(tn.UP,{label:"Minimum",placeholder:"Enter minimum value",refs:u("min",{required:"Field is required"}),error:h.min,type:tn.Zi.NUMBER}),(0,r.jsx)(tn.UP,{label:"Maximum",placeholder:"Enter maximum value",refs:u("max",{required:"Field is required"}),error:h.max,type:tn.Zi.NUMBER})]}),actions:[(0,r.jsx)(He.zx,{onClick:d((function(e){console.log(e),a({Label:e.label,Min:Number.parseFloat(e.min),Max:Number.parseFloat(e.max)},(function(){alert("Successfully added grade label"),t(!1)}),(function(){}))})),children:i==ne.AddingGradeLabel?(0,r.jsx)(rn.d,{}):" Add Grade Label "})]}),(0,r.jsx)(on.a,{show:!!o,content:o})]})},Rn=function(){var e=(0,an.cI)(),n=(e.register,e.handleSubmit,e.formState.errors,oe()),t=n.gradeLabels,a=n.loading,i=n.DeleteGradeLabel,o=(0,s.useState)(!1),c=o[0],l=o[1];return(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsx)(Mn,{show:c,toggleShow:l}),(0,r.jsxs)("div",{className:"grades",children:[(0,r.jsxs)("div",{className:"grades__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Grade Labels"]}),(0,r.jsxs)("div",{className:"grades__content",children:[(0,r.jsxs)("div",{className:"grades__content__leading",children:[(0,r.jsx)("div",{}),(0,r.jsx)("div",{className:"add-grade_label",children:(0,r.jsx)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){l(!0)},children:"Add Grade Label"})})]}),(0,r.jsx)("div",{className:"grades__content__main",children:a==ne.FetchingGradeLabels?(0,r.jsx)(rn.X,{}):null==t?(0,r.jsx)("div",{children:" null "}):t.length<1?(0,r.jsx)("div",{children:" Empty "}):(0,r.jsx)(sn,{headings:[{Name:"No"},{Name:"Label"},{Name:"Minimum"},{Name:"Maximum"},{Name:"Actions"}],children:t&&t.length>0&&t.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n+1}),(0,r.jsx)("td",{children:e.Label}),(0,r.jsx)("td",{children:e.Min}),(0,r.jsx)("td",{children:e.Max}),(0,r.jsx)("td",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:(0,r.jsx)("div",{onClick:function(){confirm('Are you sure you want to delete "'.concat(e.Label,'"'))&&i(e.ID,(function(){alert("Successfully deleted grade label")}))},style:{cursor:"pointer"},children:(0,r.jsx)(Je.Yh,{color:"red"})})})]},e.ID)}))})})]})]})]})},Ln=function(){var e=oe(),n=e.grades,t=e.loading,s=e.RejectGradeReviewRequest,a=e.ApproveGradeReviewRequest;return(0,r.jsxs)("div",{className:"grade_review_requests",children:[(0,r.jsxs)("div",{className:"grade_review_requests__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Grade Labels"]}),(0,r.jsxs)("div",{className:"grade_review_requests__content",children:[(0,r.jsx)("div",{className:"grade_review_requests__content__leading",children:(0,r.jsx)("div",{})}),(0,r.jsx)("div",{className:"grade_review_requests__content__main",children:t==ne.FetchingGradeLabels?(0,r.jsx)(rn.X,{}):null==n?(0,r.jsx)("div",{children:" null "}):n.filter((function(e){return e.ReviewRequested})).length<1?(0,r.jsx)("div",{children:" Empty "}):(0,r.jsx)(sn,{headings:[{Name:"No"},{Name:"Student Name"},{Name:"Course"},{Name:"Actions"}],children:n&&n.filter((function(e){return e.ReviewRequested})).length>0&&n.filter((function(e){return e.ReviewRequested})).map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n+1}),(0,r.jsx)("td",{children:e.User.FirstName+" "+e.User.LastName}),(0,r.jsx)("td",{children:e.Course.Name}),(0,r.jsxs)("td",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.nQ,{onClick:function(){return a(e.User.ID,e.Course.ID,(function(){alert("Successfully approved grade review request")}))},color:"green"})}),(0,r.jsx)("div",{onClick:function(){confirm("Are you sure you want to reject the review request")&&s(e.User.ID,e.Course.ID,(function(){alert("Successfully rejected grade review request")}))},style:{cursor:"pointer"},children:(0,r.jsx)(Je.SK,{color:"red"})})]})]},e.ID)}))})})]})]})},Fn=function(e){var n=e.show,t=void 0!==n&&n,s=e.toggleShow,a=(0,an.cI)(),i=a.register,o=a.handleSubmit,c=a.formState.errors,l=ve(),u=l.loading,d=l.error,h=l.setError,m=l.AddBook,f=Y().courses,g=(0,_.aC)().user;return d&&setTimeout((function(){h(null)}),5e3),(0,r.jsxs)("div",{children:[(0,r.jsx)(on.V,{show:t,title:[(0,r.jsx)("div",{children:" Add Book "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){s(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Title",placeholder:"Enter book title",refs:i("title",{required:"Field is required",minLength:{value:2,message:"Minimum characters allowed 2"}}),error:c.title}),(0,r.jsx)(tn.UP,{label:"Author",placeholder:"Enter book author",refs:i("author",{required:"Field is required",minLength:{value:2,message:"Minimum characters allowed 2"}}),error:c.author}),(0,r.jsx)(tn.UP,{label:"Description",placeholder:"Enter book description",refs:i("description",{required:"Field is required",minLength:{value:2,message:"Minimum characters allowed 2"}}),error:c.description}),!!f&&(0,r.jsx)(dn.v,{refs:i("course"),label:"Book for",placeholder:"General",options:f.map((function(e){return{name:e.Name,value:e.ID}}))}),(0,r.jsx)(tn.UP,{label:"Cover",placeholder:"Select book cover",type:tn.Zi.FILE,refs:i("cover",{required:"Field is required"}),error:c.cover}),(0,r.jsx)(tn.UP,{label:"File",placeholder:"Select book file",type:tn.Zi.FILE,refs:i("file",{required:"Field is required"}),error:c.file})]}),actions:[(0,r.jsx)(He.zx,{onClick:o((function(e){console.log(e);var n={Title:e.title,Author:e.author,Description:e.description,Cover:e.cover[0],File:e.file[0],Uploader:g,Course:e.course?f.filter((function(n){return n.ID==e.course}))[0]:null};console.log(n),m(n,(function(){alert("Successfully added book"),s(!1)}),(function(){}))})),children:u==he.AddingBook?(0,r.jsx)(rn.d,{}):" Add Book "})]}),(0,r.jsx)(on.a,{show:!!d,content:d})]})},Pn=function(e){var n=e.title,t=e.author,s=(e.description,e.cover),a=e.file;e.uploader;return(0,r.jsxs)("a",{href:a,target:"_blank",className:"book-tile",children:[(0,r.jsx)("div",{className:"book-tile__cover",children:(0,r.jsx)("img",{src:s,alt:"book cover"})}),(0,r.jsx)("div",{className:"book-tile__title",children:n}),(0,r.jsxs)("div",{className:"book-tile__author",children:[" By ",t]})]})},qn=function(){var e=ve(),n=e.books,t=e.loading,a=(e.error,e.setError,(0,s.useState)(!1)),i=a[0],o=a[1];return(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(Fn,{show:i,toggleShow:o}),(0,r.jsxs)("div",{className:"library",children:[(0,r.jsxs)("div",{className:"library__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Library"]}),(0,r.jsxs)("div",{className:"library__content",children:[(0,r.jsxs)("div",{className:"library__content__leading",children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)("div",{className:"add-book",children:(0,r.jsx)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){o(!0)},children:"Add Book"})})]}),(0,r.jsx)("div",{className:"library__content__main",children:t==he.FetchingBooks?(0,r.jsx)("div",{children:" Loading ... "}):n?n.length<1?(0,r.jsx)("div",{children:" No books "}):n.map((function(e){return(0,r.jsx)(Pn,{title:e.Title,author:e.Author,description:e.Description,cover:e.Cover.toString(),file:e.File.toString(),uploader:e.Uploader})})):(0,r.jsx)("div",{children:" Null "})})]})]})]})};function On(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}var Gn=function(e){var n=e.icon,t=e.label,s=e.content;return(0,r.jsxs)("div",{className:"user-detail__info-tile",children:[(0,r.jsx)("div",{className:"user-detail__info-tile__icon",children:n}),(0,r.jsx)("div",{className:"user-detail__info-tile__label",children:t+" :"}),(0,r.jsx)("div",{className:"user-detail__info-tile__content",children:s})]})},Vn=function(e){var n=e.user,t=e.student,a=e.show,o=void 0!==a&&a,l=e.toggleShow,u=oe(),d=u.grades,m=u.loading,f=u.gradeLabels,g=(0,_.aC)().user,x=(0,s.useState)([]),p=x[0],j=x[1];(0,s.useEffect)((function(){d&&n&&j(Array.from(d).filter((function(e){return e.User.ID==n.ID})))}),[n,d]);var v,S=(0,s.useState)(!1),N=S[0],y=S[1];return console.log(t),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Be.ez,{show:o,onClick:function(){return l(!1)}}),(0,r.jsx)("div",{className:"user-detail ".concat(o&&"user-detail--show"),children:!!n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"user-detail__top",children:[(0,r.jsx)("img",{className:"user-detail__pic",src:"http://"+n.ProfilePic.toString(),alt:"user photo"}),(0,r.jsx)("div",{className:"user-detail__name",children:n.FirstName+" "+n.LastName}),(0,r.jsx)("div",{className:"user-detail__date",children:"Registered On "+n.CreatedAt.toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"2-digit"})})]}),(0,r.jsxs)("div",{className:"user-detail__middle",children:[(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Full Name",content:n.Type!=i.Wg.STUDENT?n.FirstName+" "+n.LastName:n.FirstName+" "+t.MiddleName+" "+n.LastName}),(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Email",content:n.Email}),(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Phone",content:n.Phone}),n.Type==i.Wg.STUDENT&&(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Gender",content:t.Gender}),n.Type==i.Wg.STUDENT&&(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Birth Date",content:new Date(t.BirthDate).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"})}),n.Type==i.Wg.STUDENT&&(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Birth Place",content:t.BirthPlace}),n.Type==i.Wg.STUDENT&&(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Disability",content:t.Disability}),n.Type==i.Wg.STUDENT&&(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Previous School",content:t.PreviousSchool}),n.Type==i.Wg.STUDENT&&(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Average Mark For Highschool",content:t.AvarageMarkForHighSchool.toString()}),n.Type==i.Wg.STUDENT&&(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Matric Result",content:t.MatricResult.toString()}),n.Type==i.Wg.STUDENT&&(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Program",content:t.Program}),(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Username",content:n.Username}),(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Address",content:n.Address.City+", "+n.Address.Country}),n.Type==i.Wg.STUDENT&&(m==ne.FetchingGrades?(0,r.jsx)("div",{children:"Loading User Grades"}):d?p.length<1?(0,r.jsx)("div",{children:" Grades not submitted "}):(0,r.jsxs)("div",{style:{margin:"2.4rem 0rem"},className:"user-detail__grades",children:[(0,r.jsx)("div",{className:"user-detail__grades__label",children:"Grades by Course"}),function(){var e=p.map((function(e){return e.Course}));return e.filter((function(e,n,t){return t.findIndex((function(n){return n.ID=e.ID}))===n})),e.map((function(e){var n,t,s,a=p.filter((function(n){return n.Course.Name==e.Name})),i=!!a&&a.length>0&&(null!==(n=a[0].Assessment)&&void 0!==n?n:0)+(null!==(t=a[0].Mid)&&void 0!==t?t:0)+(null!==(s=a[0].Final)&&void 0!==s?s:0)||0;return console.log(a),(0,r.jsxs)("div",{className:"user-detail__grades__content",children:[(0,r.jsx)("div",{className:"user-detail__grades__content__course",children:e.Name}),(0,r.jsxs)("div",{className:"user-detail__grades__content__tab",children:[(0,r.jsxs)("div",{className:"user-detail__grades__content__results",children:[(0,r.jsx)("div",{className:"user-detail__grades__content__results__label",children:"25%"}),(0,r.jsx)("div",{className:"user-detail__grades__content__results__value",children:!!a&&a.length>0&&a[0].Assessment||"-"})]}),(0,r.jsxs)("div",{className:"user-detail__grades__content__results",children:[(0,r.jsx)("div",{className:"user-detail__grades__content__results__label",children:"25%"}),(0,r.jsx)("div",{className:"user-detail__grades__content__results__value",children:!!a&&a.length>0&&a[0].Mid||"-"})]}),(0,r.jsxs)("div",{className:"user-detail__grades__content__results",children:[(0,r.jsx)("div",{className:"user-detail__grades__content__results__label",children:"50%"}),(0,r.jsx)("div",{className:"user-detail__grades__content__results__value",children:!!a&&a.length>0&&a[0].Final||"-"})]}),(0,r.jsxs)("div",{className:"user-detail__grades__content__results",children:[(0,r.jsx)("div",{className:"user-detail__grades__content__results__label",children:"Total"}),(0,r.jsx)("div",{className:"user-detail__grades__content__results__value",children:i>0?i:"-"})]}),(0,r.jsxs)("div",{className:"user-detail__grades__content__results",children:[(0,r.jsx)("div",{className:"user-detail__grades__content__results__label",children:"Grade"}),(0,r.jsx)("div",{className:"user-detail__grades__content__results__value",children:f&&f.filter((function(e){return console.log(e.Label),e.Min<=i&&i<=e.Max})).length>0?f.filter((function(e){return e.Min<=i&&i<=e.Max}))[0].Label:"-"})]}),(0,r.jsxs)("div",{className:"user-detail__grades__content__results",children:[(0,r.jsx)("div",{className:"user-detail__grades__content__results__label",children:"Competency"}),(0,r.jsx)("div",{className:"user-detail__grades__content__results__value",children:i>50?"Competent":"Incompetent"})]})]})]})}))}()]}):(0,r.jsx)("div",{children:"Failed to get grades, Please refresh page"}))]}),!!g&&g.Type==i.Wg.REGISTRY_OFFICER&&!!d&&p.length>0&&(0,r.jsx)("div",{style:{marginBottom:"1.6rem",width:"100%",height:"100%",justifySelf:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(He.zx,{onClick:(v=c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=14;break}return e.prev=1,y(!0),e.next=5,(0,h.o)("/certificate?user-id=".concat(n.ID));case 5:t=e.sent,y(!1),window.open(t.data,"_blank"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),y(!1),e.t0.response?alert(e.t0.response.data):alert("Could not generate report");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var e=this,n=arguments;return new Promise((function(t,r){var s=v.apply(e,n);function a(e){On(s,t,r,a,i,"next",e)}function i(e){On(s,t,r,a,i,"throw",e)}a(void 0)}))}),size:He.qE.MEDIUM,children:N?(0,r.jsx)(rn.d,{}):"Generate Report"})}),(0,r.jsx)("div",{className:"user-detail__bottom",children:(0,r.jsx)("img",{src:"/images/logo.png",alt:"logo"})})]})})]})},zn=function(e){var n=e.active,t=void 0!==n&&n,s=e.userMessages,a=e.onClick,i=(0,_.aC)().users,o=!!i&&i.filter((function(e){return e.ID==Array.from(s)[0][0]}))[0],c=Array.from(s)[0][1];return(0,r.jsxs)("div",{onClick:function(){return a()},className:"message-user ".concat(t&&"message-user--active"),children:[(0,r.jsx)("div",{className:"message-user__pic",children:(0,r.jsx)("img",{src:!!o&&o.ProfilePic.toString(),alt:"user photo"})}),(0,r.jsx)("div",{className:"message-user__name",children:!!o&&o.FirstName+" "+o.LastName}),(0,r.jsx)("div",{className:"message-user__message",children:!!c&&c.length>0&&c[c.length-1].Content}),(0,r.jsx)("div",{className:"message-user__date",children:!!c&&c.length>0&&new Date(c[0].Date).toLocaleDateString("en-US",{year:"2-digit",month:"2-digit",day:"2-digit"})})]})},Wn=function(e){var n=e.show,t=e.toggleShow,s=e.selectedUser,a=(0,_.aC)().users;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Select User "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsx)("div",{children:!!a&&a.filter((function(e){return e.Type==i.Wg.STUDENT})).map((function(e){return(0,r.jsxs)("div",{onClick:function(){return s(e)},className:"message-user message-user--small",children:[(0,r.jsx)("div",{className:"message-user__pic message-user__pic--small",children:(0,r.jsx)("img",{src:e.ProfilePic.toString(),alt:"user photo"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"message-user__name message-user__name--small",children:[" ",e.FirstName+" "+e.LastName," "]}),(0,r.jsxs)("div",{className:"message-user__message",children:[" ",e.Username," "]})]})]})}))})})})};function Hn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Hn(e,n,t[n])}))}return e}function Yn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,s=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(c){s=!0,a=c}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Qn=function(){var e=(0,_.aC)(),n=e.user,t=e.users,a=(0,an.cI)(),i=a.register,o=a.handleSubmit,c=a.watch,l=a.setValue,u=(0,s.useContext)(Te),d=u.userMessages,h=u.SendMessage,m=u.setUserMessages,f=u.connected,g=(0,s.useState)(!1),x=g[0],p=g[1],j=(0,s.useState)(),v=j[0],S=j[1],N=function(e){console.log(e),h({Content:e.message,To:t&&t.filter((function(e){return e.ID==Array.from(v)[0][0]}))[0]},(function(){l("message",""),y()}),(function(){}))},y=function(){if(v){var e=document.getElementById("message__content__chats");e.scroll(0,e.scrollHeight)}};return(0,s.useEffect)((function(){y()}),[v]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Wn,{show:x,toggleShow:p,selectedUser:function(e){var n=e.ID,t=new Map;p(!1),d.get(n)?(console.log("userMessages.get(_k)"),console.log(d.get(n)),t.set(n,d.get(n)),S(t)):(console.log("_wm empty"),console.log(t),t.set(n,[]),m((function(e){return e.set(n,[])})),S(t))}}),(0,r.jsxs)("div",{className:"message",children:[(0,r.jsxs)("div",{className:"message__title",children:[(0,r.jsx)(Je.qK,{height:1.6,width:1.6,color:"#717f8e"})," Message +"," ",(0,r.jsx)("div",{style:{height:"1.2rem",width:"1.2rem",borderRadius:"50%",backgroundColor:f?"green":"red"}})]}),(0,r.jsxs)("div",{className:"message__content",children:[(0,r.jsxs)("div",{className:"message__content__users",children:[(0,r.jsx)("div",{className:"message__content__users__search",children:(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{size:tn.r3.SMALL,placeholder:"Search here ..."})]})}),(0,r.jsx)("div",{className:"message__content__users__list",children:d?Array.from(d).map((function(e){var n=Yn(e,2),t=n[0],s=n[1],a=new Map;return a.set(t,s),(0,r.jsx)(zn,{onClick:function(){return S(a)},userMessages:a,active:!!v&&Array.from(v)[0][0]==t})})):(0,r.jsx)("div",{style:{alignSelf:"center",justifySelf:"center",color:"grey"},children:"Empty Chat"})}),(0,r.jsx)("div",{className:"message__content__users__add",children:(0,r.jsx)(Je.dt,{onClick:function(){return p(!0)},height:3.2,width:3.2,color:"white"})})]}),(0,r.jsx)("div",{className:"message__content__chat ".concat(!!d&&!!v&&" show"),children:d&&v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:"message__content__chats",className:"message__content__chats",children:Array.from(d.get(Array.from(v)[0][0])).map((function(e){return(0,r.jsx)("div",{className:"chat-bubble ".concat(e.From.ID==n.ID?"chat-bubble--mine":""),children:e.Content})}))}),(0,r.jsxs)("div",{className:"message__content__send",children:[(0,r.jsx)("textarea",Bn({onKeyUp:function(e){"ENTER"===e.key&&o(N)()}},i("message",{required:"Field is required"}),{placeholder:"Write a message ..."})),(0,r.jsx)(Je.aI,{onClick:o(N),color:c("message")&&c("message").length>0?"blue":"grey"})]})]}):(0,r.jsx)("div",{style:{alignSelf:"center",justifySelf:"center",color:"grey"},children:"No message selected"})}),(0,r.jsx)("div",{className:"message__content__user-detail",children:v?function(){var e=!!t&&t.filter((function(e){return e.ID==Array.from(v)[0][0]}))[0];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"user-detail__top",children:[(0,r.jsx)("img",{className:"user-detail__pic",src:e.ProfilePic.toString(),alt:"user photo"}),(0,r.jsx)("div",{className:"user-detail__name",children:e.FirstName+" "+e.LastName}),(0,r.jsx)("div",{className:"user-detail__date",children:e.Username})]}),(0,r.jsxs)("div",{className:"user-detail__middle",children:[(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Email",content:e.Email}),(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Phone",content:e.Phone}),(0,r.jsx)(Gn,{icon:(0,r.jsx)(Je.Tk,{color:"grey"}),label:"Address",content:"Addis Ababa, Ethiopia."})]}),(0,r.jsx)("div",{className:"user-detail__bottom",children:(0,r.jsx)("img",{src:"/images/logo.png",alt:"logo"})})]})}():(0,r.jsx)("div",{children:"Not selected"})})]})]})]})},$n=function(e){var n=e.show,t=e.toggleShow,s=We(),a=s.loading,i=s.error,o=s.setError,c=s.AddSection,l=L().classes,u=(0,an.cI)(),d=u.register,h=u.handleSubmit,m=u.formState.errors;return i&&setTimeout((function(){o(null)}),4e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Add Section "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Name",placeholder:"Enter section name",refs:d("name",{required:"Field is required",minLength:{value:1,message:"Minimum characters 2"}}),error:m.name}),(0,r.jsx)(tn.UP,{label:"Year (GC)",placeholder:"Enter section year",type:tn.Zi.NUMBER,refs:d("year",{required:"Field is required",min:{value:2e3,message:"Minimum year allowed is 2000GC"},max:{value:2022,message:"Maximum year allowed is 2020GC"}}),error:m.year}),!!l&&(0,r.jsx)(dn.v,{label:"Class",options:l&&l.map((function(e){return{name:e.Name,value:e.ID}})),refs:d("class",{required:"Field is required"}),error:m.class})]}),actions:[(0,r.jsx)(He.zx,{onClick:h((function(e){console.log(e),c({Name:e.name,Year:Number.parseInt(e.year),Class:l.filter((function(n){return n.ID==e.class}))[0]},(function(){alert("successfully added section"),t(!1)}),(function(){}))})),children:a==qe.AddingSection?(0,r.jsx)(rn.d,{}):"Add Section"})]}),(0,r.jsx)(on.a,{show:!!i,content:i})]})},Jn=function(e){var n=e.show,t=e.toggleShow,s=e.section,a=We(),i=(a.sections,a.loading),o=a.error,c=a.setError,l=a.AddSession,u=(a.DeleteSession,(0,an.cI)()),d=u.register,h=u.handleSubmit,m=u.formState.errors,f=u.setValue,g=(u.reset,u.resetField,L().classes,(0,_.aC)().users);return o&&setTimeout((function(){c(null)}),4e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsxs)("div",{children:[" ","Manage Sessions for ".concat(s&&s.Name)," "]}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{}),s&&s.Class&&s.Class.Courses.filter((function(e){return e.Users.length>0})).length<1?(0,r.jsx)("div",{children:"Add course with assigned instructor/supervisor to class first"}):(0,r.jsxs)("div",{style:{borderTop:"1px solid #eee",paddingTop:"2.4rem"},children:[s&&s.Class.Courses&&s.Class.Courses.filter((function(e){return e.Users.length>0})).length>0&&(0,r.jsx)(dn.v,{label:"Select course with instructor/suprervisor",options:[].concat.apply([],s.Class.Courses.filter((function(e){return e.Users.length>0})).map((function(e){return e.Users.map((function(n){return{name:e.Name+" - "+n.FirstName+" "+n.LastName,value:e.ID+"-"+n.ID}}))}))),refs:d("courseUser",{required:"Field is required"}),error:m.courseUser}),(0,r.jsx)(tn.UP,{label:"Date",type:tn.Zi.DATE,other:{min:"2022-01-22T18:55:55"},refs:d("date",{required:"Field is required"}),error:m.date}),(0,r.jsx)(tn.UP,{label:"Time",type:tn.Zi.TIME,other:{min:"2022-01-22T18:55:55"},refs:d("time",{required:"Field is required"}),error:m.time}),(0,r.jsx)(tn.UP,{label:"Duration (minutes) *",type:tn.Zi.NUMBER,refs:d("duration",{required:"Field is required"}),error:m.duration,name:"duration"}),(0,r.jsx)(tn.UP,{label:"Repeat (weeks) *",type:tn.Zi.NUMBER,refs:d("repeat",{required:"Field is required"}),error:m.repeat,name:"repeat"})]})]}),actions:[(0,r.jsx)(He.zx,{onClick:h((function(e){console.log(e),l({StartDate:new Date(e.date+"T"+e.time),Duration:Number.parseInt(e.duration),Section:s,Course:s.Class.Courses.filter((function(n){return n.ID==e.courseUser.split("-")[0]}))[0],User:g.filter((function(n){return n.ID==e.courseUser.split("-")[1]}))[0]},e.repeat,(function(){alert("Successfully Added Session"),f("date",null),f("time",null),f("duration",null),f("courseUser",null),f("repeat",null)}),(function(){}))})),children:i==qe.AddingSession?(0,r.jsx)(rn.d,{}):"Add Session"})]}),(0,r.jsx)(on.a,{show:!!o,content:o})]})},Kn=function(e){var n=e.show,t=e.toggleShow,a=e.section,i=We(),o=i.loading,c=i.error,l=i.setError,u=i.UpdateSection,d=(L().classes,(0,an.cI)()),h=d.register,m=d.handleSubmit,f=d.formState.errors,g=d.setValue;return c&&setTimeout((function(){l(null)}),4e3),(0,s.useEffect)((function(){a&&(g("name",a.Name),g("year",a.Year))}),[a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Update Section "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Name",placeholder:"Enter section name",refs:h("name",{required:"Field is required",minLength:{value:2,message:"Minimum characters 2"}}),error:f.name}),(0,r.jsx)(tn.UP,{label:"Year (GC)",placeholder:"Enter section year",type:tn.Zi.NUMBER,refs:h("year",{required:"Field is required",min:{value:2e3,message:"Minimum year allowed is 2000GC"},max:{value:2022,message:"Maximum year allowed is 2020GC"}}),error:f.year})]}),actions:[(0,r.jsx)(He.zx,{onClick:m((function(e){console.log(e),u({ID:!!a&&a.ID,Year:Number.parseInt(e.year),Name:e.name,Class:!!a&&a.Class},(function(){alert("successfully updated section"),t(!1)}),(function(){}))})),children:o==qe.UpdatingSection?(0,r.jsx)(rn.d,{}):"Update Section"})]}),(0,r.jsx)(on.a,{show:!!c,content:c})]})},Xn=function(e){var n=e.show,t=e.toggleShow,s=e.section,a=We(),i=(a.sections,a.loading,a.error),o=a.setError,c=a.DeleteSession;L().classes,(0,_.aC)().users;return i&&setTimeout((function(){o(null)}),4e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsxs)("div",{children:[" ","Manage Sessions for ".concat(s&&s.Name)," "]}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsx)("div",{children:(0,r.jsx)("div",{children:(0,r.jsx)(sn,{headings:[{Name:"Date",Value:"id"},{Name:"Duration",Value:"id"},{Name:"Course",Value:"id"},{Name:"Instructor/Supervisor",Value:"id"},{Name:"Actions",Value:"id"}],children:s&&s.Sessions.map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[e.StartDate.toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"2-digit"}),e.StartDate.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),(0,r.jsx)("td",{children:e.Duration}),(0,r.jsx)("td",{children:e.Course.Name}),(0,r.jsx)("td",{children:e.User.FirstName+" "+e.User.LastName}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{onClick:function(){c(s.ID,e.ID,(function(){alert("Successfully deleted session")}),(function(){alert("Failed to delete session")}))},style:{cursor:"pointer"},children:(0,r.jsx)(Je.Yh,{color:"red"})})})]},e.ID)}))})})}),actions:[]}),(0,r.jsx)(on.a,{show:!!i,content:i})]})};function Zn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function et(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Zn(e,n,t[n])}))}return e}function nt(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var tt=function(e){var n=e.show,t=e.toggleShow,a=e.section,i=(0,_.aC)(),o=i.students,c=i.GetStudents,l=We(),u=l.loading,d=l.error,h=l.setError,m=l.ManageStudents,f=(0,s.useState)(),g=f[0],x=f[1],p=(0,s.useState)(),j=p[0],v=p[1],S=(0,s.useState)([]),N=S[0],y=S[1];return d&&setTimeout((function(){h(null)}),4e3),(0,s.useEffect)((function(){c()}),[]),(0,s.useEffect)((function(){console.log("students"),a&&a.Class&&o&&o.filter((function(e){return e.Department.ID==a.Class.Department.ID})).forEach((function(e){var n=e.Courses,t=a.Class.Courses,r=[];t.forEach((function(e){if(0==e.Prerequisites.length)r.push(e);else if(e.Prerequisites.length<=n.length){var t=!1;e.Prerequisites.forEach((function(e){n.filter((function(n){return n.ID==e.ID})).length>0&&(t=!0)})),t&&r.push(e)}})),console.log("set user courses"),console.log(r.length),y((function(n){return et({},n,Zn({},e.ID,[r,r]))}))}))}),[o]),(0,s.useEffect)((function(){a&&x(a.Students)}),[a,n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:"Manage Students for - ".concat(a&&a.Name+" - "+a.Class.Name)}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){v(null),t(!1)},children:"Cancel"})],content:(0,r.jsx)("div",{children:(0,r.jsx)(sn,{headings:[{Name:"ID",Value:"id"},{Name:"Full Name",Value:"id"},{Name:"Email",Value:"id"},{Name:"Courses",Value:"id"},{Name:"Actions",Value:"id"}],children:a&&a.Class&&!!o&&o.filter((function(e){return e.Department.ID==a.Class.Department.ID})).map((function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{id:e.ID,children:[(0,r.jsx)("td",{children:e.ID}),(0,r.jsx)("td",{children:e.User.FirstName+" "+e.User.LastName}),(0,r.jsx)("td",{children:e.User.Email}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.4rem",display:"flex",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{children:N[e.ID]?N[e.ID][1].length:0}),(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{onClick:function(){j==e.ID?v(null):v(e.ID)},color:"blue"})})]})}),(0,r.jsx)("td",{children:(0,r.jsx)(fn.J,{value:!!g&&g.filter((function(n){return n.ID==e.ID})).length>0,onChange:function(n){N[e.ID][1].length>0&&(g?g.filter((function(n){return n.ID==e.ID})).length>0?x((function(n){return nt(n.filter((function(n){return n.ID!=e.ID})))})):x((function(n){return nt(n).concat([e])})):x([e]))}})})]}),j==e.ID&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Course Name"}),(0,r.jsx)("td",{children:"Credit Hour"}),(0,r.jsx)("td",{children:"Actions"})]}),!!N[e.ID]&&N[e.ID][0].map((function(n){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[" ",n.Name," "]}),(0,r.jsxs)("td",{children:[" ",n.CreditHr," "]}),(0,r.jsx)("td",{children:(0,r.jsx)(fn.J,{value:!!N[e.ID][1]&&N[e.ID][1].filter((function(e){return e.ID==n.ID})).length>0,onChange:function(t){N[e.ID][1]?N[e.ID][1].filter((function(e){return e.ID==n.ID})).length>0?(console.log("flag1"),y((function(t){return et({},t,Zn({},e.ID,[N[e.ID][0],nt(N[e.ID][1].filter((function(e){return e.ID!=n.ID})))]))}))):(console.log("flag2"),y((function(t){return et({},t,Zn({},e.ID,[N[e.ID][0],nt(N[e.ID][1]).concat([n])]))}))):(console.log("flag0"),y((function(t){return et({},t,Zn({},e.ID,[N[e.ID][0],[n]]))})))}})})]})})}))]})]})}))})}),actions:[(0,r.jsx)(He.zx,{onClick:function(){var e=g.map((function(e){return e.ID})),n=Object.keys(N).filter((function(n){return e.includes(n)})).reduce((function(e,n){return e[n]=N[n],e}),{});console.log(N),console.log(n),m(a,n,(function(){alert("Successfully updated section students"),t(!1)}),(function(){}))},children:u==qe.ManagingStudents?(0,r.jsx)(rn.d,{}):"Update Students"})]}),(0,r.jsx)(on.a,{show:!!d,content:d})]})},rt=function(){var e=(0,_.aC)().user,n=We(),t=n.sections,a=n.loading,o=(n.error,n.DeleteSection),c=(0,s.useState)(),l=c[0],u=c[1],d=(0,s.useState)(!1),h=d[0],m=d[1],f=(0,s.useState)(!1),g=f[0],x=f[1],p=(0,s.useState)(!1),j=p[0],v=p[1],S=(0,s.useState)(!1),N=S[0],y=S[1],D=(0,s.useState)(!1),E=D[0],A=D[1],b=(0,s.useState)(t),C=b[0],w=b[1],I=(0,an.cI)(),T=I.register,k=I.handleSubmit,U=I.setValue,M=function(e){var n=e.searchQuery;if(""!=n){n=new RegExp(n,"i");var r=t&&t.filter((function(e){return e.Name.search(n)>=0||e.Class.Name.search(n)>=0}));console.log(r),w(r)}else w(t)};return(0,s.useEffect)((function(){U("searchQuery",""),w(t)}),[t]),(0,r.jsxs)(r.Fragment,{children:[h&&(0,r.jsx)($n,{show:h,toggleShow:m}),g&&!!l&&(0,r.jsx)(Kn,{show:g&&!!l,toggleShow:x,section:l}),j&&!!l&&(0,r.jsx)(tt,{show:j&&!!l,toggleShow:v,section:l}),N&&(0,r.jsx)(Jn,{show:N&&!!l,toggleShow:y,section:l}),E&&!!l&&(0,r.jsx)(Xn,{show:E&&!!l,toggleShow:A,section:l}),(0,r.jsxs)("div",{className:"sections",children:[(0,r.jsxs)("div",{className:"sections__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Sections"]}),(0,r.jsxs)("div",{className:"sections__content",children:[(0,r.jsxs)("div",{className:"sections__content__leading",children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{refs:T("searchQuery"),onKeyDown:function(e){console.log(e.key),"Enter"==e.key&&k(M)()},size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)("div",{className:"add-section",children:e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){m(!0)},children:"Add Section"})})]}),(0,r.jsx)("div",{className:"sections__content__main",children:a==qe.FetchingSections?(0,r.jsx)("div",{children:"Loading ..."}):t?(0,r.jsx)(sn,{headings:[{Name:"No",Value:"ID"},{Name:"Name",Value:"ID"},{Name:"Year",Value:"ID"},{Name:"Class",Value:"ID"},{Name:"Students",Value:"ID"},{Name:"Sessions",Value:"ID"},e&&e.Type==i.Wg.DEPARTMENT_HEAD&&{Name:"Actions",Value:"ID"}],children:C.map((function(n,t){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t+1}),(0,r.jsx)("td",{children:n.Name}),(0,r.jsx)("td",{children:n.Year}),(0,r.jsx)("td",{children:n.Class.Name}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.4rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",alignSelf:"center",justifyContent:"flex-start"},children:[n.Students?n.Students.length:0,e&&(e.Type==i.Wg.DEPARTMENT_HEAD||e.Type==i.Wg.REGISTRY_OFFICER||e.Type==i.Wg.SUB_REGISTRY_OFFICER)&&(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{onClick:function(){u(n),v(!0)},color:"blue"})})]})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.4rem",display:"flex",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[n.Sessions?n.Sessions.length:0," ",e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{onClick:function(){u(n),A(!0)},color:"blue"})}),e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.dt,{onClick:function(){u(n),y(!0)},color:"blue"})})]})}),e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.4rem",display:"flex",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{onClick:function(){u(n),x(!0)},style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{color:"blue"})}),(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.Yh,{onClick:function(){confirm('Are you sure you want to delete "'.concat(n.Name,'"'))&&o(n.ID,(function(){alert("Successfully deleted section")}),(function(){alert("Failed to delete section, please try again")}))},color:"red"})})]})})]},n.ID)}))}):(0,r.jsx)("div",{children:"Null"})}),(0,r.jsx)("div",{className:"sections__content__actions"})]})]})]})},st=function(){return(0,r.jsxs)("div",{className:"slack",children:[(0,r.jsxs)("div",{className:"slack__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Staff Messaging"]}),(0,r.jsxs)("div",{className:"slack__content",children:[(0,r.jsx)("div",{className:"slack__content__leading"}),(0,r.jsx)("div",{className:"slack__content__main",children:(0,r.jsx)("iframe",{height:"100%",width:"100%",src:"https://slack.com"})})]})]})},at=function(e){var n=e.show,t=e.toggleShow,a=(0,an.cI)(),i=a.register,o=a.handleSubmit,c=a.formState.errors,l=(0,Q.Qd)(),u=l.departments,d=l.AddStream,h=l.loading,m=l.error,f=l.setError;(0,s.useEffect)((function(){}),[]);return m&&setTimeout((function(){f(null)}),2e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.a,{show:!!m,content:m}),(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Add Stream "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsxs)("div",{children:[(0,r.jsx)(tn.UP,{label:"Name",placeholder:"Enter stream name",refs:i("name",{required:"Field is required",minLength:{value:2,message:"Minimum characters 2"}}),error:c.name}),!!u&&(0,r.jsx)(dn.v,{label:"Department",options:u&&u.map((function(e){return{name:e.Name,value:e.ID}})),refs:i("department",{required:"Field is required"}),error:c.department})]}),actions:[(0,r.jsx)(He.zx,{onClick:o((function(e){console.log(e),d({Name:e.name,Department:u.filter((function(n){return n.ID==e.department}))[0]},(function(){alert("Successfully added stream"),t(!1)}),(function(){}))})),children:h==Q.z3.AddingStream?(0,r.jsx)(rn.d,{}):"Add Stream"})]})]})},it=function(e){var n=e.show,t=e.toggleShow,a=e._stream,i=(0,an.cI)(),o=i.register,c=i.handleSubmit,l=i.formState.errors,u=i.setValue,d=(0,Q.Qd)(),h=(d.departments,d.UpdateStream),m=d.loading,f=d.error,g=d.setError;(0,s.useEffect)((function(){}),[]);return f&&setTimeout((function(){g(null)}),2e3),(0,s.useEffect)((function(){a&&u("name",a.Name)}),[a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.a,{show:!!f,content:f}),(0,r.jsx)(on.V,{show:n,title:[(0,r.jsx)("div",{children:" Update Stream "}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsx)("div",{children:(0,r.jsx)(tn.UP,{label:"Name",placeholder:"Enter stream name",refs:o("name",{required:"Field is required",minLength:{value:2,message:"Minimum characters 2"}}),error:l.name})}),actions:[(0,r.jsx)(He.zx,{onClick:c((function(e){console.log(e),h({ID:a&&a.ID,Name:e.name,Department:a&&a.Department},(function(){alert("Successfully updated stream"),t(!1)}),(function(){}))})),children:m==Q.z3.UpdatingStream?(0,r.jsx)(rn.d,{}):"Update Stream"})]})]})};function ot(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ct=function(){var e=(0,_.aC)().user,n=(0,Q.Qd)(),t=n.departments,a=n.loading,o=n.DeleteStream,c=(0,s.useState)(!1),l=c[0],u=c[1],d=(0,s.useState)(!1),h=d[0],m=d[1],f=(0,s.useState)(),g=f[0],x=f[1],p=(0,s.useState)(),j=p[0],v=p[1],S=(0,s.useState)(g),N=S[0],y=S[1],D=(0,an.cI)(),E=D.register,A=D.handleSubmit,b=D.setValue,C=function(e){var n=e.searchQuery;if(""!=n){n=new RegExp(n,"i");var t=g&&g.filter((function(e){return e.Name.search(n)>=0}));console.log(t),y(t)}else y(g)};return(0,s.useEffect)((function(){b("searchQuery",""),y(g)}),[g]),(0,s.useEffect)((function(){var e=[];t&&t.map((function(n){var t;(t=e).push.apply(t,ot(n.Streams))})),x(e)}),[t]),(0,r.jsxs)(r.Fragment,{children:[l&&(0,r.jsx)(at,{show:l,toggleShow:u}),h&&!!j&&(0,r.jsx)(it,{show:h&&!!j,toggleShow:m,_stream:j}),(0,r.jsxs)("div",{className:"classes",children:[(0,r.jsxs)("div",{className:"classes__title",children:[(0,r.jsx)(Je.fW,{height:1.6,width:1.6,color:"#717f8e"})," Streams"]}),(0,r.jsxs)("div",{className:"classes__content",children:[(0,r.jsxs)("div",{className:"classes__content__leading",children:[(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{refs:E("searchQuery"),onKeyDown:function(e){console.log(e.key),"Enter"==e.key&&A(C)()},size:tn.r3.SMALL,placeholder:"Search here ..."})]}),(0,r.jsx)("div",{className:"add-class",children:e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)(He.zx,{size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){u(!0)},children:"Add Stream"})})]}),(0,r.jsx)("div",{className:"classes_content__main",children:a==Q.z3.FetchingAllDepartments?(0,r.jsx)("div",{children:" Loading ... "}):g?g.length<1?(0,r.jsx)("div",{children:" Empty "}):(0,r.jsx)(sn,{headings:[{Name:"No",Value:"Value"},{Name:"Name",Value:"Name"},{Name:"Department",Value:"Department"},e&&e.Type==i.Wg.DEPARTMENT_HEAD&&{Name:"Actions",Value:"Actions"}],children:!!N&&N.map((function(n,t){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t+1}),(0,r.jsx)("td",{children:n.Name}),(0,r.jsx)("td",{children:n.Department.Name}),e&&e.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.4rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",alignSelf:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{onClick:function(){v(n),m(!0)},className:"pointer",children:(0,r.jsx)(Je.vV,{color:"blue"})}),(0,r.jsx)("div",{onClick:function(){confirm("Are you sure to delete stream "+n.Name)&&o(n.ID,(function(){alert("Successfully deleted stream")}),(function(){alert("Failed to delete stream")}))},className:"pointer",children:(0,r.jsx)(Je.Yh,{color:"red"})})]})})]},n.ID)}))}):(0,r.jsx)("div",{children:" Null "})})]})]})]})},lt=function(e){var n=e.show,t=e.toggleShow,a=e.student,i=(0,_.aC)(),o=i.UpdateStudentPayment,c=i.error,l=i.setError,u=i.loading,d=(0,s.useState)(a.Paid),h=d[0],m=d[1];return c&&setTimeout((function(){l(null)}),4e3),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(on.V,{show:n,title:[(0,r.jsxs)("div",{children:[" ","Update Student's Payment"," for ",a.User.FirstName+" "+a.User.LastName," "]}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){t(!1)},children:"Cancel"})],content:(0,r.jsx)("div",{children:(0,r.jsx)(dn.v,{defaultValue:h,label:"Student Payment",placeholder:"Select",onChange:function(e){m(e)},options:[{name:"Paid",value:!0},{name:"Not Paid",value:!1}]})}),actions:[(0,r.jsx)(He.zx,{onClick:function(){o(a.ID,h,(function(){alert("Successfully updated payment status"),t(!1)}),(function(){}))},children:u==_.Xt.UPDATING_STUDENT_PAYMENT?(0,r.jsx)(rn.d,{}):" Update Payment "})]}),(0,r.jsx)(on.a,{show:!!c,content:c})]})};function ut(e,n,t,r,s,a,i){try{var o=e[a](i),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(r,s)}var dt,ht,mt=function(e){var n,t=e.user,a=e.show,i=e.toggleShow,o=(0,s.useState)(!1),l=o[0],u=o[1],d=(0,s.useState)(),m=d[0],f=d[1],g=(n=c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,h.o.get("/attendances?user-id=".concat(t.ID));case 4:n=e.sent,f(n.data),u(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var e=this,t=arguments;return new Promise((function(r,s){var a=n.apply(e,t);function i(e){ut(a,r,s,i,o,"next",e)}function o(e){ut(a,r,s,i,o,"throw",e)}i(void 0)}))});return(0,s.useEffect)((function(){t&&g()}),[t]),(0,r.jsx)(on.V,{show:a,title:[(0,r.jsxs)("div",{children:[" ",t.FirstName+" "+t.LastName+"'s Attendance"," "]}),(0,r.jsx)(He.zx,{size:He.qE.SMALL,type:He.L$.OUTLINED,color:He.rp.DANGER,onClick:function(){i(!1)},children:"Cancel"})],content:(0,r.jsx)("div",{children:l?(0,r.jsx)("div",{children:"Loading ... "}):m?(0,r.jsx)("div",{children:(0,r.jsx)(sn,{headings:[{Name:"No"},{Name:"Date"},{Name:"Course Name"},{Name:"Status"}],children:m.map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{children:[" ",n+1," "]}),(0,r.jsxs)("td",{children:[" ",e.session.startDate," "]}),(0,r.jsxs)("td",{children:[" ",e.session.course.name," "]}),(0,r.jsxs)("td",{children:[" ",e.status," "]})]},e.id)}))})}):(0,r.jsx)("div",{children:"No attendances found"})})})},ft=function(e){var n=e.type,t=(0,_.aC)(),o=t.user,c=t.users,l=t.loading,u=(t.error,t.setError,t.GetUsers,t.ApproveUser),d=t.BanUser,h=t.UnbanUser,m=t.students,f=t.GetStudents,g=(0,s.useState)(c&&c.filter((function(e){return e.Type==n}))),x=(g[0],g[1],(0,s.useState)(!1)),p=x[0],j=x[1],v=(0,s.useState)(),S=v[0],N=v[1],y=(0,s.useState)(!1),D=y[0],E=y[1],A=(0,s.useState)(!1),b=A[0],C=A[1],w=(0,s.useState)(!1),I=w[0],T=w[1],k=(0,s.useState)(c),U=k[0],M=k[1],R=(0,an.cI)(),L=R.register,F=R.handleSubmit,P=R.setValue,q=function(e){var n=e.searchQuery;if(""!=n){n=new RegExp(n,"i");var t=c&&c.filter((function(e){return e.FirstName.search(n)>=0||e.LastName.search(n)>=0||e.Email.search(n)>=0}));M(t)}else M(c)};return(0,s.useEffect)((function(){P("searchQuery",""),M(c)}),[c]),(0,s.useEffect)((function(){f()}),[]),(0,r.jsxs)(r.Fragment,{children:[S&&S.Type==i.Wg.STUDENT?S&&!!m&&m.filter((function(e){return e.ID==S.ID})).length>0&&(0,r.jsx)(Vn,{user:S,student:S.Type==i.Wg.STUDENT&&!!m&&m.filter((function(e){return e.ID==S.ID}))[0],show:!!S&&D,toggleShow:function(){N(null),E(!1)}}):(0,r.jsx)(Vn,{user:S,show:!!S&&D,toggleShow:function(){N(null),E(!1)}}),I&&!!S&&(0,r.jsx)(mt,{show:I&&!!S,user:S,toggleShow:T}),b&&S&&!!m&&m.filter((function(e){return e.ID==S.ID})).length>0&&(0,r.jsx)(lt,{show:b&&S&&!!m&&m.filter((function(e){return e.ID==S.ID})).length>0,toggleShow:C,student:m.filter((function(e){return e.ID==S.ID}))[0]}),(0,r.jsxs)("div",{className:"users",children:[(0,r.jsxs)("div",{className:"users__title",children:[(0,r.jsx)("div",{children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.wy,{onClick:function(){return j(!1)},height:1.6,width:1.6,color:"#717f8e"})}),(0,r.jsx)("div",{onClick:function(){j(!1)},style:{cursor:"pointer"},children:"Back"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Je.RZ,{height:1.6,width:1.6,color:"#717f8e"}),"Users"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)(He.zx,{color:He.rp.MAIN,size:He.qE.SMALL,onClick:function(){if(c&&Array.isArray(c)&&c.length>0){var e="data:text/csv;charset=utf-8,"+c.map((function(e){return Object.values(e).join(",")})).join("\n"),n=encodeURI(e),t=document.createElement("a");t.setAttribute("href",n),t.setAttribute("download","Users Data - ".concat(Date.now().toString(),".csv")),document.body.appendChild(t),t.click()}},children:[" ","Export CSV"," "]})}),o&&(o.Type==i.Wg.ADMIN||o.Type==i.Wg.SUPER_ADMIN||o.Type==i.Wg.REGISTRY_OFFICER)&&!n&&(0,r.jsxs)("div",{children:[(0,r.jsx)(He.zx,{disabled:o&&c&&(o.Type==i.Wg.ADMIN||o.Type==i.Wg.SUPER_ADMIN?c.filter((function(e){return!e.Verified&&e.Type!=i.Wg.STUDENT})):o.Type==i.Wg.REGISTRY_OFFICER&&c.filter((function(e){return!e.Verified&&e.Type==i.Wg.STUDENT}))).length<1||p,size:He.qE.SMALL,color:He.rp.MAIN,onClick:function(){o&&c&&(o.Type==i.Wg.ADMIN||o.Type==i.Wg.SUPER_ADMIN?c.filter((function(e){return!e.Verified&&e.Type!=i.Wg.STUDENT})):o.Type==i.Wg.REGISTRY_OFFICER&&c.filter((function(e){return!e.Verified&&e.Type==i.Wg.STUDENT}))).length<1||j(!0)},children:"Registry Requests"}),o&&c&&(o.Type==i.Wg.ADMIN||o.Type==i.Wg.SUPER_ADMIN?c.filter((function(e){return!e.Verified&&e.Type!=i.Wg.STUDENT})):o.Type==i.Wg.REGISTRY_OFFICER&&c.filter((function(e){return!e.Verified&&e.Type==i.Wg.STUDENT}))).length>0&&(0,r.jsx)("div",{className:"request_count",children:c&&c.filter((function(e){return!e.Verified})).length})]})]}),(0,r.jsxs)("div",{className:"users__content",children:[(0,r.jsxs)("div",{className:"users__content__leading",children:[!p&&(0,r.jsxs)("div",{className:"table-search",children:["Search:",(0,r.jsx)(tn.UP,{refs:L("searchQuery"),onKeyDown:function(e){"Enter"==e.key&&F(q)()},size:tn.r3.SMALL,placeholder:"Search here ..."})]}),o&&o.Type==i.Wg.REGISTRY_OFFICER&&n==i.Wg.REGISTRY_OFFICER&&(0,r.jsx)(He.zx,{onClick:function(){a.default.push("/auth/register/sub-registry-officer?red=dashboard")},size:He.qE.SMALL,color:He.rp.MAIN,children:"Add Registry Officer"}),o&&o.Type==i.Wg.REGISTRY_OFFICER&&n==i.Wg.STUDENT&&(0,r.jsx)(He.zx,{onClick:function(){a.default.push("/auth/register/student?red=dashboard")},size:He.qE.SMALL,color:He.rp.MAIN,children:"Add Student"})]}),(0,r.jsx)("div",{className:"users__content__main",children:l==_.Xt.FETCHING_USERS?(0,r.jsx)("div",{children:" Loading ... "}):c?p?(0,r.jsx)(sn,{headings:[{Name:"No"},{Name:"ID"},{Name:"Full Name"},{Name:"Registered On"},{Name:"Role"},{Name:"Email"},{Name:"Phone"},{Name:"Actions"}],children:c.filter((function(e){return!e.Verified})).map((function(e,n){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:n+1}),(0,r.jsx)("td",{children:e.ID}),(0,r.jsx)("td",{style:{textTransform:"capitalize"},children:e.FirstName+" "+e.LastName}),(0,r.jsx)("td",{children:e.CreatedAt.toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"2-digit"})}),(0,r.jsx)("td",{children:e.Type}),(0,r.jsx)("td",{children:e.Email}),(0,r.jsx)("td",{children:e.Phone}),(0,r.jsxs)("td",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.N,{onClick:function(){console.log(!!S),console.log(m),N(e),E(!0)},color:"black"})}),(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.nQ,{onClick:function(){confirm("Approve user ".concat(e.FirstName," ").concat(e.LastName))&&u(e,(function(){alert("Successfully approved user")}))},color:"green"})}),(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.SK,{onClick:function(){confirm('Are you sure you want to ban "'.concat(e.FirstName,'"'))},color:"red"})})]})]},e.ID)}))}):c.filter((function(e){return e.Verified&&e.ID!=o.ID})).length<1?(0,r.jsx)("div",{children:" Empty "}):(0,r.jsx)(sn,{headings:[{Name:"No"},{Name:"ID"},{Name:"Full Name"},{Name:"Registered On"},{Name:"Role"},n==i.Wg.STUDENT?{Name:"Payment"}:o.Type!=i.Wg.DEPARTMENT_HEAD||n!=i.Wg.INSTRUCTOR&&n!=i.Wg.SUPERVISOR?{Name:"Actions"}:{Name:"Attendance"},(n==i.Wg.STUDENT||o.Type==i.Wg.DEPARTMENT_HEAD&&(n==i.Wg.INSTRUCTOR||n==i.Wg.SUPERVISOR))&&{Name:"Actions"}],children:(n?U.filter((function(e){return e.Type==n})):U).filter((function(e){return e.Verified&&e.ID!=o.ID})).map((function(e,t){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t+1}),(0,r.jsx)("td",{children:e.ID}),(0,r.jsx)("td",{style:{textTransform:"capitalize"},children:e.FirstName+" "+e.LastName}),(0,r.jsx)("td",{children:e.CreatedAt.toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"2-digit"})}),(0,r.jsx)("td",{children:e.Type}),o.Type==i.Wg.DEPARTMENT_HEAD&&(n==i.Wg.INSTRUCTOR||n==i.Wg.SUPERVISOR)&&(0,r.jsx)("td",{children:(0,r.jsx)("div",{style:{height:"4.4rem",display:"flex",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:(0,r.jsx)("div",{className:"pointer",children:(0,r.jsx)(Je.N,{onClick:function(){N(e),T(!0)},color:"black"})})})}),n==i.Wg.STUDENT&&(0,r.jsx)("td",{children:(0,r.jsxs)("div",{style:{height:"4.4rem",display:"flex",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[m&&m.filter((function(n){return n.ID==e.ID}))[0]&&m.filter((function(n){return n.ID==e.ID}))[0].Paid?"Paid":"Not Paid",o&&o.Type==i.Wg.REGISTRY_OFFICER&&(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.vV,{onClick:function(){N(e),C(!0)},color:"blue"})})]})}),(0,r.jsxs)("td",{style:{height:"4.8rem",display:"grid",gridAutoFlow:"column",columnGap:"1.6rem",alignItems:"center",justifyContent:"flex-start"},children:[(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.N,{onClick:function(){N(e),E(!0)},color:"black"})}),o&&o.Type==i.Wg.SUPER_ADMIN&&(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsx)(Je.SK,{onClick:function(){confirm("Are you sure you want to ".concat(e.Banned?"Unban":"Ban",' "').concat(e.FirstName,'"'))&&(e.Banned?h(e,(function(){return alert("Successfully unbanned user")})):d(e,(function(){return alert("Successfully banned user")})))},color:e.Banned?"green":"red"})})]})]},e.ID)}))}):(0,r.jsx)("div",{children:" Null "})}),(0,r.jsx)("div",{className:"users__content__actions"})]})]})]})},gt=function(e){e.setIndex,e.currIndex;var n=(0,_.aC)().user;return(0,r.jsxs)("div",{className:"home-header",children:[(0,r.jsx)("div",{className:"home-header__menu",children:(0,r.jsx)(Je.Oq,{height:2.4,width:2.4,color:"black",onClick:Ye})}),(0,r.jsxs)("div",{className:"home-header__search",children:[(0,r.jsx)("div",{className:"home-header__search--icon",children:(0,r.jsx)(Je.W1,{height:2.4,width:2.4,color:"#717f8e"})}),(0,r.jsx)("div",{className:"home-header__search--full",children:"Search Items"})]}),(0,r.jsx)("div",{className:"home-header__setting",children:(0,r.jsx)(Je.qK,{onClick:function(){window.open("https://slack.com","")},height:2.4,width:2.4,color:"#717f8e"})}),(0,r.jsxs)("div",{className:"home-header__profile",children:[(0,r.jsx)("div",{className:"home-header-profile__pic",children:n&&n.ProfilePic&&(0,r.jsx)("img",{src:"http://"+n.ProfilePic.toString(),alt:"user photo"})}),(0,r.jsx)("div",{className:"home-header-profile__name",children:n&&n.FirstName+" "+n.LastName}),(0,r.jsx)("div",{className:"home-header-profile__role",children:n&&n.Type})]})]})};(ht=dt||(dt={})).DASHBOARD="dashboard",ht.DEPARTMENTS="departments",ht.USERS="users",ht.COURSES="courses",ht.CLASSES="classes",ht.SECTIONS="sections",ht.ANNOUNCEMENTS="announcements",ht.MESSAGES="messages",ht.LIBRARY="library",ht.GRADE_LABELS="grade labels",ht.GRADE_REVIEW_REUESTS="grade review requests",ht.SLACK="slack",ht.STREAMS="streams",ht.ADMINS="admins",ht.REGISTRY_OFFICERS="registry officers",ht.DEPARTMENT_HEADS="department heads",ht.INSTRUCTORS="instructors",ht.SUPERVISORS="supervisors",ht.STUDENTS="students";var xt=function(e,n,t,s,o){return(0,r.jsx)(nn,{leading:(0,r.jsx)(Ke,{}),content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.LE,{}),title:"Dashboard",active:n==dt.DASHBOARD,onClick:function(){t(dt.DASHBOARD),Qe()}}),(0,r.jsx)(en,{parent:(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.RZ,{}),title:"Users",trailing:(0,r.jsx)(Je.XC,{height:1.2,width:1.2}),active:n==dt.USERS,onClick:function(){t(dt.USERS),Qe()}}),children:[(0,r.jsx)(Ze,{responsive:e,title:"Admins",icon:(0,r.jsx)("div",{children:"AD"}),active:n==dt.ADMINS,onClick:function(){t(dt.ADMINS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,title:"Registry Officers",icon:(0,r.jsx)("div",{children:"RO"}),active:n==dt.REGISTRY_OFFICERS,onClick:function(){t(dt.REGISTRY_OFFICERS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,title:"Department Heads",icon:(0,r.jsx)("div",{children:"DH"}),active:n==dt.DEPARTMENT_HEADS,onClick:function(){t(dt.DEPARTMENT_HEADS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,title:"Instructors",icon:(0,r.jsx)("div",{children:"IN"}),active:n==dt.INSTRUCTORS,onClick:function(){t(dt.INSTRUCTORS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,title:"Supervisors",icon:(0,r.jsx)("div",{children:"SU"}),active:n==dt.SUPERVISORS,onClick:function(){t(dt.SUPERVISORS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,title:"Students",icon:(0,r.jsx)("div",{children:"ST"}),active:n==dt.STUDENTS,onClick:function(){t(dt.STUDENTS),Qe()}})],onClick:function(){}}),(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.CU,{}),title:"Courses",active:n==dt.COURSES,onClick:function(){t(dt.COURSES),Qe()}}),(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.fW,{}),title:"Departments",active:n==dt.DEPARTMENTS,onClick:function(){t(dt.DEPARTMENTS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.SN,{}),title:"Streams",active:n==dt.STREAMS,onClick:function(){t(dt.STREAMS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.SN,{}),title:"Classes",active:n==dt.CLASSES,onClick:function(){t(dt.CLASSES),Qe()}}),(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.SN,{}),title:"Sections",active:n==dt.SECTIONS,onClick:function(){t(dt.SECTIONS),Qe()}}),o&&(o.Type==i.Wg.ADMIN||o.Type==i.Wg.SUPER_ADMIN)&&(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.iD,{}),title:"Announcements",active:n==dt.ANNOUNCEMENTS,onClick:function(){t(dt.ANNOUNCEMENTS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.qK,{}),title:"Messages",active:n==dt.MESSAGES,onClick:function(){t(dt.MESSAGES),Qe()}}),o&&(o.Type==i.Wg.ADMIN||o.Type==i.Wg.SUPER_ADMIN)&&(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.vV,{}),title:"Grade Labels",active:n==dt.GRADE_LABELS,onClick:function(){t(dt.GRADE_LABELS),Qe()}}),o&&o.Type==i.Wg.DEPARTMENT_HEAD&&(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.vV,{}),title:"Grade Review Requests",active:n==dt.GRADE_REVIEW_REUESTS,onClick:function(){t(dt.GRADE_REVIEW_REUESTS),Qe()}}),(0,r.jsx)(Ze,{responsive:e,icon:(0,r.jsx)(Je.qB,{}),title:"Lbrary",active:n==dt.LIBRARY,onClick:function(){t(dt.LIBRARY),Qe()}})]}),actions:(0,r.jsx)(He.zx,{type:He.L$.FLAT,size:He.qE.SMALL,color:He.rp.WHITE,onClick:function(){s((function(){a.default.push("/auth/login")}),(function(){}))},leading:(0,r.jsx)(Je.YT,{})})})},pt=function(){var e=(0,s.useState)(dt.DASHBOARD),n=e[0],t=e[1],o=(0,_.aC)(),c=o.user,l=o.loading,u=o.Logout,d=(0,a.useRouter)();return(0,s.useEffect)((function(){c||l==_.Xt.AUTO_LOGIN||(console.log("return to login"),console.log(!c),console.log(l),d.replace("/auth/login"))}),[c,l]),l==_.Xt.AUTO_LOGIN?(0,r.jsx)("div",{children:"Loading ...."}):c?(0,r.jsxs)("div",{className:"home",style:{height:"100vh"},children:[(0,r.jsx)($e,{children:xt(!1,n,t,u,c)}),(0,r.jsx)("div",{className:"home__left",children:(0,r.jsx)(Xe,{children:xt(!0,n,t,u,c)})}),(0,r.jsxs)("div",{className:"home__right",children:[(0,r.jsx)(gt,{setIndex:function(e){t(e)},currIndex:n}),function(){switch(n){case dt.DASHBOARD:return(0,r.jsx)(y,{children:(0,r.jsx)(Q.bX,{children:(0,r.jsx)(In,{})})});case dt.USERS:return(0,r.jsx)(ie,{children:(0,r.jsx)(ft,{})});case dt.ADMINS:return(0,r.jsx)(ft,{type:i.Wg.ADMIN});case dt.REGISTRY_OFFICERS:return(0,r.jsx)(ft,{type:i.Wg.REGISTRY_OFFICER});case dt.DEPARTMENT_HEADS:return(0,r.jsx)(ft,{type:i.Wg.DEPARTMENT_HEAD});case dt.INSTRUCTORS:return(0,r.jsx)(ft,{type:i.Wg.INSTRUCTOR});case dt.SUPERVISORS:return(0,r.jsx)(ft,{type:i.Wg.SUPERVISOR});case dt.STUDENTS:return(0,r.jsx)(ie,{children:(0,r.jsx)(ft,{type:i.Wg.STUDENT})});case dt.COURSES:return(0,r.jsx)(B,{children:(0,r.jsx)(_n,{})});case dt.DEPARTMENTS:return(0,r.jsx)(Q.bX,{children:(0,r.jsx)(Un,{})});case dt.STREAMS:return(0,r.jsx)(Q.bX,{children:(0,r.jsx)(ct,{})});case dt.CLASSES:return(0,r.jsx)(Q.bX,{children:(0,r.jsx)(B,{children:(0,r.jsx)(R,{children:(0,r.jsx)(pn,{})})})});case dt.SECTIONS:return(0,r.jsx)(R,{children:(0,r.jsx)(ze,{children:(0,r.jsx)(rt,{})})});case dt.ANNOUNCEMENTS:return(0,r.jsx)(y,{children:(0,r.jsx)(un,{})});case dt.MESSAGES:return(0,r.jsx)(ke,{children:(0,r.jsx)(Qn,{})});case dt.LIBRARY:return(0,r.jsx)(B,{children:(0,r.jsx)(je,{children:(0,r.jsx)(qn,{})})});case dt.GRADE_LABELS:return(0,r.jsx)(ie,{children:(0,r.jsx)(Rn,{})});case dt.GRADE_REVIEW_REUESTS:return(0,r.jsx)(ie,{children:(0,r.jsx)(Ln,{})});case dt.SLACK:return(0,r.jsx)(st,{});default:return(0,r.jsx)(In,{})}}()]})]}):(0,r.jsx)("div",{})},jt=function(){return(0,r.jsx)(pt,{})}}},function(e){e.O(0,[718,105,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);